{
  "name": "andrea workflow updated new",
  "nodes": [
    {
      "parameters": {
        "content": "## Main Flow\n",
        "height": 1360,
        "width": 4040
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -368,
        -48
      ],
      "typeVersion": 1,
      "id": "52b43e3d-e955-4417-b27b-3791a83453d7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst updatedItems = items.map((item) => {\n  const email = item.json;\n  const output = {\n    email_id: email.id,\n    thread_id: email.threadId,\n    from_name: email.from?.value[0]?.name,\n    from_email: email.from?.value[0]?.address,\n    to_email: email.to?.value[0]?.address,\n    subject: email.subject,\n    snippet: email.text,\n    internal_date: email.date,\n    labels: email.labelIds,\n  };\n  return { json: output };\n});\n\nreturn updatedItems;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -80,
        464
      ],
      "id": "7c834971-9bec-4b13-9832-5cd7867e742c",
      "name": "Get email fields"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        1936,
        512
      ],
      "id": "be98f018-cf98-44d9-bf60-90b8bbe0043b",
      "name": "OpenAI Chat Model6",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n\t\"draft_response\": \"hi...\",\n\t\"subject\": \"this is subject\",\n    \"new_plan\": \"yes/no\"  \n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.2,
      "position": [
        2288,
        528
      ],
      "id": "c948d704-5da8-4d87-bbfe-9864b9cdf33e",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "simple": false,
        "filters": {
          "readStatus": "unread"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.2,
      "position": [
        -288,
        464
      ],
      "id": "f039f2b9-bb07-4658-920c-355310c702d5",
      "name": "Gmail Trigger",
      "credentials": {
        "gmailOAuth2": {
          "id": "Fzim1C004MlrxlKn",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "new client email"
            },
            {
              "name": "client_id",
              "value": "={{ $json.fields.client_id }}"
            },
            {
              "name": "project_id",
              "value": "={{ $json.fields.project_id }}"
            },
            {
              "name": "email_id",
              "value": "={{ $json.fields['email_id '] }}"
            },
            {
              "name": "thread_id",
              "value": "={{ $json.fields.thread_id }}"
            },
            {
              "name": "sender email",
              "value": "={{ $json.fields.sender }}"
            },
            {
              "name": "email subject",
              "value": "={{ $json.fields.subject }}"
            },
            {
              "name": "email body",
              "value": "={{ $json.fields.body }}"
            },
            {
              "name": "timestamp",
              "value": "={{ $json.fields.timestamp }}"
            },
            {
              "name": "client name",
              "value": "={{ $('crm for clients').first().json.fields.full_name }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2992,
        896
      ],
      "id": "46cacd3c-8923-4d1e-99bf-54331e2b970e",
      "name": "Ingest client email"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "new project"
            },
            {
              "name": "client_id",
              "value": "={{ $json.metadata.client_id }}"
            },
            {
              "name": "project_id",
              "value": "={{ $json.metadata.project_id }}"
            },
            {
              "name": "destination",
              "value": "={{ $('crm for projects2').first().json.fields.destination }}"
            },
            {
              "name": "travel dates",
              "value": "={{ $('crm for projects2').first().json.fields.travel_dates }}"
            },
            {
              "name": "status",
              "value": "={{ $('crm for projects2').first().json.fields.status }}"
            },
            {
              "name": "budget",
              "value": "={{ $('crm for projects2').first().json.fields.budget }}"
            },
            {
              "name": "client intent",
              "value": "={{ $('crm for projects2').first().json.fields.intent }}"
            },
            {
              "name": "client preferences",
              "value": "={{ $('crm for projects2').first().json.fields.preferences }}"
            },
            {
              "name": "number of travelers",
              "value": "={{ $('crm for projects2').first().json.fields.number_of_travelers }}"
            },
            {
              "name": "client name",
              "value": "={{ $('crm for clients').first().json.fields.full_name }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3200,
        896
      ],
      "id": "49044d87-8351-4b53-b670-75d18bc037e8",
      "name": "ingest new project data"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "new client email"
            },
            {
              "name": "project_id",
              "value": "={{ $json.project_id }}"
            },
            {
              "name": "email_id",
              "value": "={{ $json['email_id '] }}"
            },
            {
              "name": "thread_id",
              "value": "={{ $json.thread_id }}"
            },
            {
              "name": "email subject",
              "value": "={{ $json.subject }}"
            },
            {
              "name": "email body",
              "value": "={{ $json.body }}"
            },
            {
              "name": "timestamp",
              "value": "={{ $json.timestamp }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2800,
        336
      ],
      "id": "af7d7802-82fc-4caf-8c4b-f59e2cdb3e25",
      "name": "Ingest client email1"
    },
    {
      "parameters": {
        "jsCode": "// Generate a random number between 1 and 99999\nconst randomNum = Math.floor(Math.random() * 99999) + 1;\n\n// Pad with leading zeros to ensure 5 digits\nconst paddedId = randomNum.toString().padStart(5, '0');\n\n// Build final IDs\nconst clientId = `CLI-${paddedId}`;\nconst projectId = `PRJ-${paddedId}`; // or use projectId = `PRJ-${clientId}-01` for versioning\n\n// Return both\nreturn [\n  {\n    json: {\n      client_id: clientId,\n      project_id: projectId\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1680,
        896
      ],
      "id": "3939cd25-b770-4cc6-9029-dfbda2f394d7",
      "name": "generate client and project id"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "GPT-5-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a highly efficient travel advisor assistant working for a premium travel agency. A client has just emailed us with a travel inquiry. \n\nYour task is to perform **two actions**:\n\n---\n\n### ‚úâÔ∏è 1. Draft a detailed warm and professional acknowledgment email(At least 3 paras)\n- start with client name i.e Dear Andrea or Dear Traveller if name is not found.\n- Confirm we‚Äôve received the request.\n- Invite them to schedule a discovery call using this Calendly link: https://meetings.hubspot.com/andrea196\n- **Do not** use any itineraries or pricing word in the response.\n-  ‚Ä¢ Suggest they prepare additional trip details before the call (do not mention \"reply to this email\" in response.\n- Keep the tone human, friendly, and reassuring.\n- Do not include a personal name or sign-off ‚Äî just use **‚ÄúAndrea Oschetti‚Äù**.\n\n---\n\n### üîç 2. Extract and structure key details from the client‚Äôs email\n\nReturn a JSON object with the following fields:\n\n```json\n{\n  \"subject\": \"reply email subject\",\n  \"draft_email_content\": \"Acknowledgment email text here...\",\n  \"extracted_data\": {\n    \"client_name\": \"[If mentioned or inferable, else null]\",\n    \"project_name\": \"[name of client-trip to destination name]\",\n    \"client_email\": \"[Parsed from metadata or body]\",\n    \"phone\": \"[If found, else null]\",\n    \"intent\": \"[Short summary of what the client wants]\",\n    \"destination\": \"[Main destination(s), if mentioned]\",\n    \"dates\": \"[Travel timeframe]\",\n    \"preferences\": \"[Tags like luxury, hiking, family, adventure, etc.]\",\n    \"budget\": \"[e.g., luxury, mid-range, budget, or specific amount]\",\n    \"number_of_travelers\": \"[If mentioned, else null]\",\n    \"client_location\": \"[If user mentions where they are from]\",\n  \"client_type\": \"\",        // e.g. family, couple, solo, group, corporate\n  \"trip_duration\": \"\",\n  \"style\": \"\",              // e.g. adventure, luxury, cultural, honeymoon, nature\n  \"season\": \"\"              // e.g. spring, summer, fall, winter\n\"Avoid these things \": \"\"              // if client mentioned anything that he dont want\n}\n  }\n}\n\nHere is the email content and user information.\nFrom: {{ $('Get email fields').item.json.from_email }}\nsubject: {{ $('Get email fields').item.json.subject }}\nemail body: {{ $('Get email fields').item.json.snippet }}\ndate: {{ $('Get email fields').item.json.internal_date }}\n\n\n\n"
            },
            {
              "content": "=Call the first_responder_tool while generating the responses as well ",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1360,
        912
      ],
      "id": "aaf6c31d-071d-4ed7-981f-abbefbdd817c",
      "name": "get client details and trip",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.message.content }}",
                    "rightValue": "new_client",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "b2cea91b-72e2-46bc-b8e4-f77b11930d06"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "0b81237e-d717-404f-a3d1-1f2676c4ad55",
                    "leftValue": "={{ $json.message.content }}",
                    "rightValue": "internal_team",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "d2436ac7-e9f2-4ed7-902c-815b4eabcdf8",
                    "leftValue": "={{ $json.message.content }}",
                    "rightValue": "supplier",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "80ee7fd9-cafc-42b3-80e6-96962ec1dbd1",
                    "leftValue": "={{ $json.message.content }}",
                    "rightValue": "spam",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        1120,
        928
      ],
      "id": "317b5b76-9ad7-42dc-9fa3-47a8460a524c",
      "name": "Switch"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "GPT-5-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an email classifier.\n\nClassify the following email into one of these five categories:\n\n1. new_client ‚Äì The email is from a new potential customer. Classify as \"new_client\" only if:\n   - The **subject** is or includes:  \n     `You have received a new trip inquiry from a WendyPerrin.com \"Client Name\"`\n   - The **subject** is or includes:  \n     `An enquiry has been submitted on Blueflower.la`\n   - The **subject** is: `NOW MANUALLY` (any sender)\nor understand the email body if its a potential new client.\n\n3. supplier ‚Äì The email is from a supplier such as a hotel, travel agency, or destination management company (DMC). May include booking details, rate proposals, or logistical arrangements.\n\n4. internal_team ‚Äì The email is from a colleague or internal team member. Common indicators include:\n   - Subject or body starts with \"Hi team\"\n   - Discusses internal operations or coordination.\n   \n5. spam ‚Äì Any promotional email, cold outreach, marketing content, irrelevant material, or unknown/untrusted sender, any automations plateform like airtable, asana and other tools mark them as spam too.\n\n---\n\nOnly output one word, the category label:  \n**new_client**, **supplier**, **internal_team**, or **spam**.\n\n---\n\nEmail content to classify:  \n**Sender:**  {{ $('Get email fields').first().json.from_email }}\n**Subject:** {{ $('Get email fields').first().json.subject }}\n**Body:** {{ $('Get email fields').first().json.snippet }}\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        704,
        848
      ],
      "id": "a08b6981-e5d7-499e-aea5-10258e5a0f4a",
      "name": "decide sender",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "first_responder_tool",
        "toolDescription": "call this tool when generating client responses",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        1392,
        1072
      ],
      "id": "38cb1c1f-5800-41c5-b9af-685635ef6586",
      "name": "Qdrant Vector Store3",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1456,
        1184
      ],
      "id": "20b3a957-19ba-466f-8c15-7eb394296671",
      "name": "Embeddings OpenAI3",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f6886fef-a6d1-4949-9114-2dbf2bc3fa9b",
              "leftValue": "={{ $json.email }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        448,
        464
      ],
      "id": "9779421e-2387-4c42-b837-81f3bf332f68",
      "name": "If1"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "emails_knowledge_base",
        "toolDescription": "call this tool when responding to client emails",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        2032,
        496
      ],
      "id": "cd3fb396-5796-4412-9795-046f6838dcb1",
      "name": "Qdrant Vector Store8",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2032,
        624
      ],
      "id": "fee50bd0-1e89-4320-9247-58d0b2f7482a",
      "name": "Embeddings OpenAI8",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | New Client Inquiry - {{ $('get client details and trip').item.json.message.content.extracted_data.client_name }} | Approve First Response",
            "Assignee": "={{ [ { \"email\": $json.Email } ] }}",
            "Priority": "High",
            "Due Date": "={{ new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString() }}",
            "Description": "={{ $('get client details and trip').item.json.message.content.draft_email_content }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2144,
        896
      ],
      "id": "e8e8e8b7-c96f-4989-8556-5a1ca9f657ee",
      "name": "create task for first response",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('generate client and project id').item.json.client_id }}",
            "full_name": "={{ $('get client details and trip').item.json.message.content.extracted_data.client_name }}",
            "email": "={{ $('get client details and trip').item.json.message.content.extracted_data.client_email }}",
            "phone": "={{ $('get client details and trip').item.json.message.content.extracted_data.phone }}",
            "client_location": "={{ $('get client details and trip').item.json.message.content.extracted_data.client_location }}",
            "tour_count": 1
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "full_name",
              "displayName": "full_name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "phone",
              "displayName": "phone",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_location",
              "displayName": "client_location",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tour_count",
              "displayName": "tour_count",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2352,
        896
      ],
      "id": "12d46ffa-9ba4-4bb0-b113-93cde91e0db7",
      "name": "crm for clients",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('generate client and project id').item.json.project_id }}",
            "client_id": "={{ $('generate client and project id').item.json.client_id }}",
            "destination": "={{ $('get client details and trip').item.json.message.content.extracted_data.destination }}",
            "travel_dates": "={{ $('get client details and trip').item.json.message.content.extracted_data.dates }}",
            "status": "Proposal",
            "budget": "={{ $('get client details and trip').item.json.message.content.extracted_data.budget }}",
            "intent": "={{ $('get client details and trip').item.json.message.content.extracted_data.intent }}",
            "preferences": "={{ $('get client details and trip').item.json.message.content.extracted_data.preferences }}",
            "number_of_travelers": "={{ $('get client details and trip').item.json.message.content.extracted_data.number_of_travelers }}",
            "tript duration": "={{ $('get client details and trip').item.json.message.content.extracted_data.trip_duration }}",
            "client type": "={{ $('get client details and trip').item.json.message.content.extracted_data.client_type }}",
            "tript style": "={{ $('get client details and trip').item.json.message.content.extracted_data.style }}",
            "season": "={{ $('get client details and trip').item.json.message.content.extracted_data.season }}",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2560,
        896
      ],
      "id": "39d7fce5-67af-428c-81a5-71ccb443fed4",
      "name": "crm for projects2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "email_id ": "={{ $('Get email fields').first().json.email_id }}",
            "thread_id": "={{ $('Get email fields').first().json.thread_id }}",
            "subject": "={{ $('Get email fields').first().json.subject }}",
            "body": "={{ $('Get email fields').first().json.snippet }}",
            "timestamp": "={{ $('Get email fields').first().json.internal_date }}",
            "asana task id": "={{ $('create task for first response').item.json.id }}",
            "Reply subject": "={{ $('get client details and trip').item.json.message.content.subject }}",
            "client_id": "={{ $('crm for clients').item.json.fields.client_id }}",
            "client name": "={{ $('crm for clients').item.json.fields.full_name }}",
            "project_id": "={{ $json.fields.project_id }}",
            "sender": "={{ $('crm for clients').item.json.fields.email }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task status",
              "displayName": "asana task status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "final payment recieved",
              "displayName": "final payment recieved",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2784,
        896
      ],
      "id": "c181acf4-e049-4257-99fa-380f7812e2fc",
      "name": "crm for emails1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        8240,
        480
      ],
      "id": "5371ea81-49da-448e-bb4e-54ab7f9d013f",
      "name": "OpenAI Chat Model2",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an AI travel assistant helping to refine and send professional email responses to clients.\n\nYou will receive the original email draft and human feedback in the form of comments. These comments suggest changes that must be applied before the email is sent.\n\nYour task is to rewrite the email accordingly. Maintain a professional, friendly, and clear tone. Do not include any internal notes or comments in the final version. You can also get the client basic information like name etc from AI Reply such as Dear Jhon etc. Try to use the same name in updated email.\n\n---\n\nOrignal Email from Client: \n{{ $json.body }}\nAI Reply Draft:\n{{ $('check status').item.json.Description }}\nHuman Feedback (Comments):\n{{ $('latest comment').item.json.text }}\n\n\n---\n\nWrite the final, revised email below, applying all suggested changes:\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        8224,
        352
      ],
      "id": "11a521b4-3723-47de-bcb9-c2656371dedb",
      "name": "update email"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7168,
        320
      ],
      "id": "e0b6ea4f-3fe6-40d9-9b53-4ab26628d284",
      "name": "check status"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "Reply to client email "
            },
            {
              "name": "clien_id",
              "value": "={{ $json.fields.client_id }}"
            },
            {
              "name": "project_id",
              "value": "={{ $json.fields.project_id }}"
            },
            {
              "name": "subject",
              "value": "={{ $json.fields['Reply subject'] }}"
            },
            {
              "name": "ai reply",
              "value": "={{ $json.fields['AI Reply'] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7984,
        144
      ],
      "id": "d1624248-172f-4d03-8b4b-03a84724d4aa",
      "name": "Request to ingest sent email"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "=New Client Inquiry",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "id": "c49f391c-9f55-42f4-bd8e-14d1c36b890e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ba7879b2-aa64-4293-a439-a354a07e8f46",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Reply to Client",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "bd8e6d79-6afc-4a99-86af-df1a057e9cd2",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Blueprint | Email Approval",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "43580b53-f36c-4aba-a96f-f04f4c81627f",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Assign Travel Designer",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "5ca32e72-3b2c-4760-91cc-406dc87ef8bf",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Initial Payment Confirmation",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "ea73d9e4-2afe-4621-a7e7-7b48357f776f",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Itinerary Draft Approval",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "1f083a2f-576a-44d2-b329-d954eaf8ee0b",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Add supplier email",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "28805ea3-beb0-49ce-9945-e72135cdf538",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Itinerary format",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "318690c4-8447-4bd7-a07e-4df36069e4ac",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Proposal Received",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "77ba218e-7502-4c18-a946-7008bf72c696",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Finance File",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "88523bba-f756-4bd7-825b-29620ef8a586",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "30% Deposit",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "e94aba74-c52c-4205-b2f8-0e53d21ba66c",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Send the Final Visual Itinerary",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "3d46159a-c3db-4828-abb2-69a98dfb75fd",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Final Payment",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f447bb3d-9cc8-429e-b7dd-7af253f86bd1",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Send the Pre-Trip Email",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "db766984-1368-4c2e-936c-c2e8d6efc0fb",
                    "leftValue": "={{ $json['Task Name'] }}",
                    "rightValue": "Existing Client New Trip Inquiry",
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        5104,
        2608
      ],
      "id": "25a65bcd-6b51-4416-a75e-bc4d02545f0d",
      "name": "Identify task"
    },
    {
      "parameters": {
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{$json.body.recordId}}",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        4768,
        2784
      ],
      "id": "ffaaef9a-0a63-48d6-abcd-46c588346e8d",
      "name": "Airtable",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status').item.json.id }}",
            "Description": "={{ $json.output }}",
            "Task Status": false,
            "AI Agent Status": "Update Done"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8592,
        352
      ],
      "id": "c445012b-8ca0-476e-9b18-375b929e9bd4",
      "name": "update airtable",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "asana task id": "={{ $json.id }}",
            "AI Reply": "={{ $json.Description }}"
          },
          "matchingColumns": [
            "asana task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task status",
              "displayName": "asana task status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "final payment recieved",
              "displayName": "final payment recieved",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        144
      ],
      "id": "8ed0a0b1-4cc1-479a-b10e-615b90fce3ab",
      "name": "get airtable task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "filterByFormula": "=({asana task id} = '{{ $('check status').item.json.id }}') ",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8000,
        352
      ],
      "id": "5c48418e-5305-4e5a-a0a5-b60f52cb5bc5",
      "name": "get airtable task1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "={Email} = \"{{ $json.from_email }}\"",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        192,
        464
      ],
      "id": "2654db82-6eb9-4995-aae0-7ef0002e53c1",
      "name": "Airtable1",
      "alwaysOutputData": true,
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=AND(\n  {client_id} = \"{{ $('If1').item.json.client_id }}\",\n  {status} != \"Payment Done\"\n)\n",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1312,
        336
      ],
      "id": "8c596052-86ef-46be-954f-dedf5902b641",
      "name": "get projects details",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "filterByFormula": "=AND(\n  {client_id} = \"{{ $json.client_id }}\",\n  {project_id} = \"{{ $json.project_id }}\"\n)\n",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1536,
        336
      ],
      "id": "11617460-b566-44a9-9d7d-4595161c669b",
      "name": "get emails details1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Group by client_id\nconst grouped = {};\n\nfor (const item of items) {\n  const clientId = item.json.client_id; // change to your actual field name\n  if (!grouped[clientId]) {\n    grouped[clientId] = {\n      client_id: clientId,\n      body: [],\n      AIReply: []\n    };\n  }\n  if (item.json.body) {\n    grouped[clientId].body.push(item.json.body);\n  }\n  if (item.json[\"AI Reply\"]) {\n    grouped[clientId].AIReply.push(item.json[\"AI Reply\"]);\n  }\n}\n\n// Convert grouped object to array, joining entries with a separator\nconst results = Object.values(grouped).map(g => ({\n  client_id: g.client_id,\n  body: g.body.join(\"\\n\\n--- NEW EMAIL ---\\n\\n\"),\n  AIReply: g.AIReply.join(\"\\n\\n--- NEW REPLY ---\\n\\n\")\n}));\n\nreturn results.map(r => ({ json: r }));\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1792,
        336
      ],
      "id": "fed20e01-c783-4f92-a32f-dce5278c30a1",
      "name": "combine older messages"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are a travel planning assistant for a premium travel agency. Your task is to generate polite, professional, and context-aware email replies to our clients.\n\nBelow is the email thread history, with the most recent client message at the end.\n\nCurrent email by client:\n{{ $('Get email fields').first().json.snippet }}\n\nPrevious conversation between the client and us:\nIncoming Emails: {{ $json.body }}\nAI Reply: {{ $json.AIReply }}\n\nCurrent Client & Project Details:\nClient name: {{ $('If1').first().json.full_name }}\nClient Email: {{ $('If1').first().json.email }}\nLocation: {{ $('If1').first().json.client_location }}\nTour count: {{ $('If1').first().json.tour_count }}\nProject Status: {{ $('get projects details').first().json.status }}\n\nOur status workflow:\n- first response done ‚Üí Client's first email has been answered.\n- discovery call - pending ‚Üí Waiting to schedule a call to discuss project details.\n- blueprint sent ‚Üí Discovery call completed, and blueprint sent to the client.\n- initial payment pending ‚Üí Waiting for the client to make the initial payment.\n- initial payment done ‚Üí Initial payment received.\n- itinerary sent ‚Üí Itinerary has been sent to the client.\n- supplier itinerary sent ‚Üí Itinerary sent to DMC supplier; awaiting their response.\n- 30% deposit done ‚Üí 30% deposit received from the client.\n- final visual itinerary sent ‚Üí Final visual itinerary sent to the client.\n- final payment done ‚Üí All payments received from the client.\n\nInstructions for your reply:\n- Respond directly to the client‚Äôs latest message.\n- Use the **exact Project Status** to explain clearly where they are in the process and what the next step will be.\n- If the status means we are waiting on the client (e.g., payment pending), state this politely.\n- If the status means we are working on something (e.g., supplier itinerary sent), inform the client and give reassurance.\n- Maintain a warm, respectful, and professional tone.\n- Avoid adding extra steps or assuming actions that have not occurred.\n- Keep it concise (3‚Äì5 sentences).\n- If the client is just saying ‚Äúthanks‚Äù or ending the conversation, acknowledge and close politely.\n- Always end the email with: **\"Best regards,\\n\\nThe Andrea Travel Agency Team\"**\n\n**Output format:**\n[\n  {\n    \"output\": {\n      \"draft_response\": \"<your generated reply here do not add subject here>\",\n      \"subject\": \"<reply subject line>\"\n    }\n  }\n]\n",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "call emails_knowledge_base tool when responding to client "
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        2000,
        336
      ],
      "id": "61c669c2-7d91-4edd-a1b9-8c52cc92a602",
      "name": "response generator"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent| Reply to Client - {{ $('get emails details1').first().json.client_id }} | Approve Draft Email Reply",
            "Assignee": "={{ [ { \"email\": \"ali@remap.ai\" } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Description": "={{ $json.output.draft_response }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2352,
        336
      ],
      "id": "f1b4d0ec-d4b4-4ef7-95c8-25061ac4b7f3",
      "name": "create task for reply approval",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblosG3F9Q5SteGmG",
          "mode": "list",
          "cachedResultName": "Team Members",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblosG3F9Q5SteGmG"
        },
        "filterByFormula": "=({Name} = 'Ali')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1904,
        896
      ],
      "id": "fb7d7f4b-a3e8-4eb1-b702-54ca7a51e14b",
      "name": "get team members",
      "executeOnce": true,
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "email_id ": "={{ $('Get email fields').first().json.email_id }}",
            "thread_id": "={{ $('Get email fields').first().json.thread_id }}",
            "client_id": "={{ $('get emails details1').first().json.client_id }}",
            "client name": "={{ $('get emails details1').first().json['client name'] }}",
            "project_id": "={{ $('get emails details1').first().json.project_id }}",
            "sender": "={{ $('Get email fields').first().json.from_email }}",
            "subject": "={{ $('Get email fields').first().json.subject }}",
            "body": "={{ $('Get email fields').first().json.snippet }}",
            "timestamp": "={{ $('Get email fields').first().json.internal_date }}",
            "Reply subject": "={{ $('response generator').item.json.output.subject }}",
            "AI Reply": "={{ $('response generator').item.json.output.draft_response }}",
            "asana task id": "={{ $json.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "final payment recieved",
              "displayName": "final payment recieved",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2576,
        336
      ],
      "id": "0c6ad744-88b7-4411-a7d7-1f04dfd6f04c",
      "name": "add latest client email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status').item.json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        624
      ],
      "id": "b64fd0dc-4377-4a35-be4b-21ec3f57f1b6",
      "name": "delete task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "filterByFormula": "=({asana task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        624
      ],
      "id": "89ab1eb5-5d0e-4b1b-ae83-111761a8d421",
      "name": "get project id from emails",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $json.project_id }}",
            "status": "Rejected First Response"
          },
          "matchingColumns": [
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7952,
        624
      ],
      "id": "7d38ef1e-448b-4b6a-8158-b43b798516c7",
      "name": "update project status",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "content": "## Blueprint Generator\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 760,
        "width": 4520,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -336,
        1488
      ],
      "typeVersion": 1,
      "id": "56607f69-faec-43dd-b87c-2ead6a908e36",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "call transcript"
            },
            {
              "name": "client id",
              "value": "={{ $('get client preferences1').item.json.message.content['client id'] }}"
            },
            {
              "name": "call transcript",
              "value": "={{ $('extract partcipants').item.json.transcript }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1968,
        1600
      ],
      "id": "ac0b7519-39b3-4573-ad1f-a4a5f979e7f5",
      "name": "ingest in db1"
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "triggerOn": "specificFolder",
        "folderToWatch": {
          "__rl": true,
          "value": "1Vj36bh9wiMTAQO6nCGltp3ZeWLSUN6h_",
          "mode": "list",
          "cachedResultName": "Meet Recordings",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1Vj36bh9wiMTAQO6nCGltp3ZeWLSUN6h_"
        },
        "event": "fileCreated",
        "options": {}
      },
      "type": "n8n-nodes-base.googleDriveTrigger",
      "typeVersion": 1,
      "position": [
        -288,
        1632
      ],
      "id": "091b22c8-362b-4531-9522-dbb130b5991b",
      "name": "Google Drive Trigger",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an expert travel planning assistant. Your task is to analyze the following call transcript between a travel advisor and a client and extract a structured **client profile** that summarizes the client‚Äôs travel plans, preferences, and personal context.\n\nPlease return the information in the following JSON format:\n\n{\n  \"name\": \"\",\n  \"client id\": \"CLI-xxxx\",\n  \"client_location\": \"\",\n  \"destination\": \"\",\n  \"travel_dates\": \"DD-MM-YYYY to DD-MM-YYYY\"(Fixed Format keep that),\n  \"budget\": \"\",\n  \"intent\": \"\",\n  \"preferences\": preference1, 2, 3(comman separated),\n  \"number_of_travelers\": \"\",\n  \"client_type\": \"\",        // e.g. family, couple, solo, group, corporate\n  \"trip_duration\": \"\",\n  \"style\": \"\",              // e.g. adventure, luxury, cultural, honeymoon, nature\n  \"season\": \"\"              // e.g. spring, summer, fall, winter\n}\n\nUse the client‚Äôs words or clearly implied details. If the transcript is vague on any element, leave that field as an empty string (\"\"). Use your best judgment when interpreting casual language. The output must be a valid JSON object only.\n\n-Note: Use previosly existing client and project details as well but the call transcript is the most updated details keep that in mind.\n\nNow analyze this transcript:\n---\nCall Transcript: \n{{ $('extract partcipants').item.json.transcript }}\nSummary: {{ $('extract partcipants').item.json.summary }}\n\nClient & Project Details saved before call:\nClient id: {{ $json.client_id }}\nProject id: {{ $json.project_id }}\nDestination: {{ $json.destination }}\nDate: {{ $json.travel_dates }}\nbudget: {{ $json.budget }}\nintent: {{ $json.intent }}\nPreferences: {{ $json.preferences }}\nNo. of Travellers: {{ $json.number_of_travelers }}\nTrip Duration: {{ $json['tript duration'] }}\nClient type: {{ $json['client type'] }}\nTript Style: {{ $json['tript style'] }}\nSeason: {{ $json.season }}\n\n\n---\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1424,
        1600
      ],
      "id": "cbf0377b-42a4-4c15-b24b-f01a6be5fd9f",
      "name": "get client preferences1",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a5bff7a-6894-4445-890e-82b8c498016c",
              "name": "email",
              "value": "=Hi,  \nYour personalized travel blueprint is ready! You can view and download it using the link below:  \n[Blueprint Link]({{ $('HTTP Request1').item.json.link }})\n\nIf you have any questions or would like to make adjustments, feel free to reach out. I‚Äôm here to help shape the perfect journey for you.  \n\nWarm regards,  \nAndrea\n",
              "type": "string"
            },
            {
              "id": "e8c5437c-98a2-4968-a694-ad7b05e3062a",
              "name": "blueprint",
              "value": "={{ $('blueprint generator').item.json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2960,
        1600
      ],
      "id": "a1cc6822-ac1d-416b-939a-79525327f518",
      "name": "set fields email and blueprint"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/convert-to-pdf",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $json.output }}"
            },
            {
              "name": "client id",
              "value": "={{ $('update projects data').item.json.fields.client_id }}"
            },
            {
              "name": "type",
              "value": "blueprint"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2592,
        1600
      ],
      "id": "6a99d6e3-645a-4472-8371-6bebe9403480",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "operation": "get",
        "documentURL": "={{ $json.id }}",
        "simple": false
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        -48,
        1632
      ],
      "id": "5111b0a3-d0b5-4f89-8608-6f3331945390",
      "name": "read client emails",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "eBwW0DZWu807dIUQ",
          "name": "Google Docs account ali"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const docContent = items[0].json.body.content;\nconst allParticipants = [];\nlet summary = \"Summary not found.\";\nlet fullText = \"\";\n\nfor (const element of docContent) {\n  if (element.paragraph) {\n    for (const subElement of element.paragraph.elements) {\n      // 1. Extract participants from \"person\" smart chips\n      if (subElement.person) {\n        const name = subElement.person.personProperties.name;\n        const email = subElement.person.personProperties.email;\n        if (name && email) {\n          allParticipants.push({ name, email });\n        }\n      }\n\n      // 2. Build the full text content of the document\n      if (subElement.textRun && subElement.textRun.content) {\n        fullText += subElement.textRun.content;\n      }\n    }\n  }\n}\n\n// 3. Find the summary section\nconst summarySection = docContent.find(\n  (element) =>\n    element.paragraph &&\n    element.paragraph.paragraphStyle.namedStyleType === \"HEADING_3\" &&\n    element.paragraph.elements[0].textRun &&\n    element.paragraph.elements[0].textRun.content.trim() === \"Summary\"\n);\n\nif (summarySection) {\n  const summaryParagraph = docContent[docContent.indexOf(summarySection) + 1];\n  if (summaryParagraph && summaryParagraph.paragraph && summaryParagraph.paragraph.elements) {\n    const summaryTextElement = summaryParagraph.paragraph.elements.find(\n      (el) => el.textRun && !el.textRun.content.includes(\"A summary wasn't produced\")\n    );\n    if (summaryTextElement) {\n      summary = summaryTextElement.textRun.content.trim();\n    }\n  }\n}\n\n// Separate owner and participants\nlet owner = null;\nconst participants = [];\n\nfor (const person of allParticipants) {\n  if (person.email.toLowerCase() === \"ali@remap.ai\") {\n    owner = person;\n  } else {\n    participants.push(person);\n  }\n}\n\nreturn [{\n  json: {\n    owner: owner,\n    participants: participants,\n    summary: summary,\n    transcript: fullText\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        192,
        1632
      ],
      "id": "c4d0f526-684a-4474-b103-69cbdc55c65a",
      "name": "extract partcipants"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are Andrea Oschetti, a luxury travel designer.\n\nYour task is to return a **single, GitHub-Flavored Markdown document only**. No HTML, no code fences, no extra commentary. **ASCII only**.\n\n**STRICT, NON-NEGOTIABLE FORMATTING RULES**\n\n- **Rule 1: Indentation.** Every single line of text‚Äîincluding paragraphs, headings, and bullet points‚Äîmust be indented with **exactly three spaces** (`   `) to create a consistent left margin.\n- **Rule 2: Headings.** All headings must be on their **own line**. They must be bolded with `** **` and indented with exactly three spaces (`   `). After each heading, there must be **exactly ONE blank line**. Do not merge headings with paragraphs.\n- **Rule 3: Blank Lines.** There must be **exactly ONE blank line** between:\n    - The email header section and the salutation.\n    - The salutation and the opening paragraph.\n    - The opening paragraph and the first section heading.\n    - Each subsequent section heading and the paragraph(s) below it.\n    - Each full section.\n- **Rule 4: Bullet Points.** Bullet points are only allowed in the **Practical Details & Considerations** section. Each bullet point must begin with `\"   - \"` (three spaces, a dash, and a space). Each bullet point must be followed by its own short, descriptive paragraph on a new line. Do not combine bullet points or their content.\n- **Rule 5: Lists.** Never use numbered lists anywhere.\n- **Rule 6: Section Order & Names.** Follow the exact section order and names provided below. Do not add or remove sections.\n\nEMAIL HEADER (must appear exactly like this, bold labels, no colons after bold, horizontal rule after):\n   **From** Andrea Oschetti  \n   **Subject** Your Journey to {destination}: A Thoughtful Beginning  \n   **Date** {travel_dates}  \n   **To** {client_email}  \n   **Cc** {cc_emails}  \n   \n   ---\n\n   Dear {client_name},\n\n**OPENING PARAGRAPH** (80‚Äì100 words)\n- Indent with three spaces.\n- 2‚Äì3 sentences setting a sensory scene for the journey.\n- Reference the client's interests and trip details.\n- End by pointing to the \"Understanding Your Travel Style and Priorities\" section.\n\n---\n\n**SECTION ORDER & WORD COUNTS**\n*Remember the indentation rule: every line starts with three spaces.*\n\n   **Understanding Your Travel Style and Priorities**\n   - 150‚Äì200 words.\n   - 1‚Äì2 paragraphs.\n   - Indent with three spaces.\n   - Discuss pace, culture, art, food, guides, budget, and special notes.\n   - End by leading to \"Suggested Itinerary and First Ideas\".\n\n   ---\n\n   **Suggested Itinerary and First Ideas**\n   - 300‚Äì350 words, 2‚Äì3 paragraphs.\n   - Indent with three spaces.\n   - Highlight 2‚Äì3 anchor moments per location with bold inline labels (e.g., **Cultural Encounters**, **Art & Craftsmanship**).\n   - Use sensory descriptions; avoid day-by-day structure.\n   - End by pointing to \"Hotels\".\n\n   ---\n\n   **Hotels**\n   - 350‚Äì550 words. Recommend 2‚Äì3 properties per location.\n   - Indent with three spaces.\n   - All hotel names must be **bold**.\n   - For each hotel, include its design, service, location, and why it's a good fit.\n   - End by pointing to \"Other Experiences\".\n\n   ---\n\n   **Other Experiences**\n   - 100‚Äì180 words. One paragraph.\n   - Indent with three spaces.\n   - Highlight curated, private encounters using bold inline labels.\n   - End by pointing to \"What to Expect When Working with Us: The Blueflower Way\".\n\n   ---\n\n   **What to Expect When Working with Us: The Blueflower Way**\n   - 60‚Äì120 words. One paragraph.\n   - Indent with three spaces.\n   - Promise a seamless, unhurried journey and attentive care.\n   - End by pointing to \"Practical Details & Considerations\".\n\n   ---\n\n   **Practical Details & Considerations**\n   - 100‚Äì120 words.\n   - Indent with three spaces.\n   - **This is the ONLY section where bullet points are allowed.**\n   - Start each bullet with `\"   - \"`\n   - Each bullet point must be followed by its own short, descriptive paragraph on a new line.\n   - Include Private Guides, Seamless Logistics, Dining Experiences, Concierge Support.\n   - Also, include a brief mention of accessibility, health & safety, visas, tipping norms, and sustainability.\n   - End by pointing to \"Commitment Deposit\".\n\n   ---\n\n   **Commitment Deposit**\n   - 80‚Äì140 words. One paragraph.\n   - Indent with three spaces.\n   - Explain the fully creditable deposit.\n   - Include the provided Stripe link and the specific \"not sure\" sentence verbatim.\n   \n   ---\n\n   **Next Steps**\n   - 60‚Äì120 words. One warm paragraph.\n   - Indent with three spaces.\n   - Invite client feedback and questions.\n\n---\n\n**SIGNATURE** (must end exactly like this, with one blank line before):\n   \n   Warm regards,\n   Andrea\n\n---\n\n**VOICE & STYLE**\n- Warm, polished, and inviting.\n- Narrative and conversational flow.\n- Avoid repetition and hard-sell tones.\n\n**CLIENT DATA:**\nclient_name = {{ $('get client preferences1').item.json.message.content.name }}\nclient_id = {{ $('get client preferences1').item.json.message.content['client id'] }}\ndestination = {{ $('get client preferences1').item.json.message.content.destination }}\ntrip_duration = {{ $('get client preferences1').item.json.message.content.trip_duration }}\ntravel_dates = {{ $('get client preferences1').item.json.message.content.travel_dates }}\nstyle = {{ $('get client preferences1').item.json.message.content.style }}\npreferences = {{ $('get client preferences1').item.json.message.content.preferences }}\nnumber_of_travelers = {{ $('get client preferences1').item.json.message.content.number_of_travelers }}\nbudget = {{ $('get client preferences1').item.json.message.content.budget }}\nintent = {{ $('get client preferences1').item.json.message.content.intent }}\nseason = {{ $('get client preferences1').item.json.message.content.season }}\nclient_type = {{ $('get client preferences1').item.json.message.content.client_type }}\nclient_location = {{ $('get client preferences1').item.json.message.content.client_location }}\nclient_email = {{ $('get client preferences1').item.json.message.content.client_email || 'N/A' }}\ncc_emails = {{ $('get client preferences1').item.json.message.content.cc_emails || 'N/A' }}\ndeposit_link = {{ $('get client preferences1').item.json.message.content.deposit_link || 'N/A' }}",
        "options": {
          "systemMessage": "=- Note: Never miss the provided format and always add proper headings and proper blueprint format. That is strictly important!\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        2224,
        1600
      ],
      "id": "a01c34be-cc6f-460a-ab0f-efd0c51a0bfc",
      "name": "blueprint generator"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2192,
        1760
      ],
      "id": "f61489c6-1413-4107-9425-f47a0847e90a",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "blueprint_knowledge_base",
        "toolDescription": "call this tool when creating blueprints",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        2320,
        1776
      ],
      "id": "05a87bf2-0f00-4874-9a8b-19e53f8b9e7a",
      "name": "Qdrant Vector Store4",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        2336,
        1904
      ],
      "id": "c4873351-30bd-4c9a-83a7-069a3d47b380",
      "name": "Embeddings OpenAI4",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        624,
        1488
      ],
      "id": "6d8e6771-a00a-4aef-8fc6-798952628131",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "jsCode": "// Get input data from previous node\nconst items = $input.all();\n\n// Extract only the participants array\nreturn items.map(item => {\n  return {\n    json: { participants: item.json.participants }\n  };\n});"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        384,
        1632
      ],
      "id": "4271daab-2de3-43a6-8afe-68e4a111db0c",
      "name": "get participants"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({email} = '{{ $json.participants[0].email }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        848,
        1488
      ],
      "id": "3abf1ee1-d12a-4de6-adbe-a1d8433e8aa4",
      "name": "did client exist",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "d446cace-1bbb-4b05-94f2-9f3b0b60b15b",
              "leftValue": "={{ $json.email }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1024,
        1488
      ],
      "id": "d2fdeab0-0766-44bd-abcd-3ea71ba6fd62",
      "name": "If",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1232,
        1600
      ],
      "id": "dfa096be-afbc-49d8-9c4c-412d8bc6f0ee",
      "name": "Airtable2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('Airtable2').item.json.project_id }}",
            "client_id": "={{ $('Airtable2').item.json.client_id }}",
            "destination": "={{ $json.message.content.destination }}",
            "travel_dates": "={{ $json.message.content.travel_dates }}",
            "budget": "={{ $json.message.content.budget }}",
            "intent": "={{ $json.message.content.intent }}",
            "preferences": "={{ $json.message.content.preferences }}",
            "number_of_travelers": "={{ $json.message.content.number_of_travelers }}",
            "tript duration": "={{ $json.message.content.trip_duration }}",
            "client type": "={{ $json.message.content.client_type }}",
            "tript style": "={{ $json.message.content.style }}",
            "season": "={{ $json.message.content.season }}"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1792,
        1600
      ],
      "id": "4de1c149-c9b6-49c0-a82d-48e4d1861299",
      "name": "update projects data",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({client_id} = '{{ $('update projects data').item.json.fields.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2800,
        1600
      ],
      "id": "feba12fc-9f00-4fa4-8bea-0782a9f8b6dc",
      "name": "get project details",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get project details').item.json.project_id }} | Blueprint | Email Approval",
            "Description": "={{ $json.email }}",
            "Assignee": "={{ [ { \"email\": \"ali@remap.ai\" } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3184,
        1600
      ],
      "id": "6bd351d7-89af-4db2-a242-1bd06a565239",
      "name": "create blueprint aproval task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get project details').item.json.project_id }} | Assign Travel Designer",
            "Description": "Assign a TD as an Assignee to this task and set approval field.",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3408,
        1600
      ],
      "id": "8d0f0e0b-7f3c-49f2-9303-802f8eda98b4",
      "name": "create task for TD Assignment",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client id": "={{ $('get project details').item.json.client_id }}",
            "project id": "={{ $('get project details').item.json.project_id }}",
            "asana task id": "={{ $('create blueprint aproval task').item.json.id }}",
            "blueprint": "={{ $('set fields email and blueprint').first().json.blueprint }}",
            "link": "={{ $('HTTP Request1').item.json.link }}",
            "file id": "={{ $('HTTP Request1').item.json.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "blueprint",
              "displayName": "blueprint",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3632,
        1600
      ],
      "id": "1f7155dc-c612-4762-a138-f9b9ed490491",
      "name": "store blueprint",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('get project details').first().json.project_id }}",
            "client_id": "={{ $('get project details').first().json.client_id }}",
            "asana task id for TD": "={{ $('create task for TD Assignment').item.json.id }}"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        3840,
        1600
      ],
      "id": "21b0f905-3105-48f9-8cbe-febbf13ffbda",
      "name": "Add TD task id in Projects",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "Itinerary Blueprint"
            },
            {
              "name": "project id",
              "value": "={{ $json['project id'] }}"
            },
            {
              "name": "client id",
              "value": "={{ $json['client id'] }}"
            },
            {
              "name": "blueprint",
              "value": "={{ $json.blueprint }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7952,
        912
      ],
      "id": "cf719e91-9ab7-4728-8ce1-cf1d83cd5a45",
      "name": "ingest in db"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "blueprints_knowledge_base",
        "toolDescription": "call this vector if any changes in the blueprint is required",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        8912,
        1264
      ],
      "id": "d9f3a63e-335b-4df6-8577-36982155dac0",
      "name": "Qdrant Vector Store",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        8912,
        1392
      ],
      "id": "761d1c8b-a0f2-42e1-a498-aac75b9abc31",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1ef5477d-d38b-4760-b3df-d7c1af66b1df",
              "name": "email",
              "value": "=Hi,  \nYour personalized travel blueprint is ready! You can view and download it using the link below:  \n[Blueprint Link]({{ $json.link }})\n\nIf you have any questions or would like to make adjustments, feel free to reach out. I‚Äôm here to help shape the perfect journey for you.  \n\nWarm regards,  \nAndrea\n",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9632,
        1088
      ],
      "id": "4a4f2110-a532-46be-a4d3-3a7399cc4212",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        1040
      ],
      "id": "cd6909ea-1784-4749-be12-7c3d36fd7500",
      "name": "check status1"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "filterByFormula": "=({asana task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        912
      ],
      "id": "53f59036-70c2-4161-8e4c-a9b56d1c709f",
      "name": "get blueprint1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "filterByFormula": "=({asana task id} = '{{ $('check status1').item.json.id}}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8144,
        1088
      ],
      "id": "d7a1d0b3-f096-4923-8078-8ce410ad2ba1",
      "name": "get blueprint2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json['client id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8368,
        1088
      ],
      "id": "4de9dc38-66da-48de-ac95-f43a09829d71",
      "name": "get client details",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({project_id} = '{{ $('get blueprint2').item.json['project id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8592,
        1088
      ],
      "id": "6ef39fff-d038-4e57-8a7b-e499c2bab5c8",
      "name": "get project details2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a travel planning assistant.\n\nBelow is a proposed day-by-day family cruise itinerary. A human reviewer has provided feedback requesting some changes or improvements. Your job is to revise the itinerary accordingly, preserving the overall structure and original intent unless requested otherwise.\n\nBe sure to:\n- Keep the trip suitable for a family with young kids (ages 5 and 9).\n- Maintain a luxury and relaxing experience.\n- Avoid extensive walking, per original requirements.\n- Respect any locations, dates, or themes the client wants to keep.\n- Only update days that are requested to be changed.\n\n---\n\nORIGINAL ITINERARY:\n{{ $('get blueprint2').item.json.blueprint }}\n\n---\n\nHUMAN FEEDBACK:\n{{ $('latest comment1').first().json.text }}\n\nClient Details With Project Details:\nClient Name: {{ $('get client details').item.json.full_name }}\nEmail: {{ $('get client details').item.json.email }}\nPhone: {{ $('get client details').item.json.phone }}\nLocation: {{ $('get client details').item.json.client_location }}\nDestination: {{ $json.destination }}\nPreferences: {{ $json.preferences }}\nNumber of Travellers: {{ $json.number_of_travelers }}\nDuration: {{ $json['tript duration'] }}\nTrip Style: {{ $json['tript style'] }}\n---\n\nUPDATED ITINERARY:\n(Please return only the updated full version icluding all days in the same format as the original, no extra commentary.)\n"
            },
            {
              "content": "Update the blueprint with my changes and return only the full, updated version in the same format ‚Äî no duplicates.",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8832,
        1088
      ],
      "id": "d4750113-a0ae-4658-aaae-d84715eff643",
      "name": "blueprint updater",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "value": "={{ $('get blueprint2').first().json['file id'] }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        9184,
        1088
      ],
      "id": "f6456916-5787-4915-8a44-4b6ccede6257",
      "name": "delete previos blueprint",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/convert-to-pdf",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $('blueprint updater').item.json.message.content }}"
            },
            {
              "name": "type",
              "value": "blueprint"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9408,
        1088
      ],
      "id": "840fc197-ea66-4d11-b989-5bec1bf46cce",
      "name": "convet to pdf"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('get blueprint2').first().json['asana task id'] }}",
            "Description": "={{ $json.email }}",
            "Task Status": false,
            "AI Agent Status": "Update Done"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9840,
        1088
      ],
      "id": "febc891e-9ce7-48c6-a748-1ec2f98207c8",
      "name": "update blueprint task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "asana task id": "={{ $('update blueprint task').item.json.id }}",
            "blueprint": "={{ $('blueprint updater').first().json.message.content }}",
            "link": "={{ $('convet to pdf').first().json.link }}",
            "file id": "={{ $('convet to pdf').first()\n.json.id }}"
          },
          "matchingColumns": [
            "asana task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "blueprint",
              "displayName": "blueprint",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        10272,
        1088
      ],
      "id": "3a66ff10-33a6-4049-9d34-c24e36325851",
      "name": "update blueprint data",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "filterByFormula": "=({asana task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        1264
      ],
      "id": "be021503-6a95-4716-9bed-58533768f83a",
      "name": "get blueprint",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json['client id'] }}",
            "project_id": "={{ $json['project id'] }}",
            "status": "Blueprint Rejected"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7968,
        1264
      ],
      "id": "bc8adb5f-f951-40a3-9e12-cda191a90b4a",
      "name": "update project status1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status1').first().json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8192,
        1264
      ],
      "id": "84c60c30-2dd7-481b-8eab-e594c690405b",
      "name": "delete task1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "976c5324-4ba6-49d7-a727-8a9965b861c5",
              "name": "Email",
              "value": "=Dear {{ $json.full_name }},\n\nWe‚Äôre excited to let you know that we‚Äôve received your initial payment and your trip is officially confirmed! \n\nHere‚Äôs what happens next:\n\nOur team will begin securing your accommodations, activities, and travel arrangements.\n\nYou‚Äôll receive a detailed itinerary shortly with all confirmed bookings.\n\nWe‚Äôll keep you updated at every step to ensure a smooth and worry-free experience.\n\nIf you have any questions, special requests, or would like to make changes, simply reply to this email and we‚Äôll be happy to assist.\n\nThank you for choosing us to plan your journey‚Äîwe can‚Äôt wait to make this trip unforgettable for you!\n\nWarm regards,\nAndrea Oschetti",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8224,
        1552
      ],
      "id": "6bdee6b7-6375-40a7-beb8-a42bbfa4272b",
      "name": "set email body for payment"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        1568
      ],
      "id": "b45a06d3-07e4-4a61-bf85-5f2576a87457",
      "name": "check status2"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "asana task id for TD": "={{ $json.id }}",
            "TD": "={{ $json.Assignee[0].email }}",
            "TD Asana Id": "={{ $json.Assignee[0].id }}"
          },
          "matchingColumns": [
            "asana task id for TD"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7744,
        1552
      ],
      "id": "33f5d42e-49a6-49d0-807b-04601e19cc42",
      "name": "add TD email to project",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json.fields.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8000,
        1552
      ],
      "id": "19dfb12d-433f-4625-b43d-db491d79c732",
      "name": "get client details1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('add TD email to project').item.json.fields.project_id }} | Initial Payment Confirmation - Thank You Email",
            "Description": "={{ $json.Email }}",
            "Assignee": "={{ [ { \"email\": $('add TD email to project').item.json.fields.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8448,
        1552
      ],
      "id": "403096ea-a30a-4bab-bac1-e6884504b612",
      "name": "create task for thank you email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('add TD email to project').first().json.fields.client_id }}",
            "project_id": "={{ $('add TD email to project').first().json.fields.project_id }}",
            "asana task id for payment tracking": "={{ $json.id }}",
            "email_number": 0,
            "next_email_index": 0,
            "status": "Initial Payment Pending"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8672,
        1552
      ],
      "id": "e65e7610-ebad-4706-8d6b-1cd6fa5d8a8b",
      "name": "add payment task id",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/convert-to-pdf",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $json.message.content }}"
            },
            {
              "name": "client id",
              "value": "={{ $('add thank you email to emaisl').item.json.fields.client_id }}"
            },
            {
              "name": "type",
              "value": "itinerary"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9152,
        1840
      ],
      "id": "a6d0cdcb-c9e7-43e6-8fc9-14cc6b552432",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "73d62729-7889-44c0-981d-5029467767aa",
              "name": "notes",
              "value": "=Hi,  \nYour personalized travel itinerary is ready!  You can view and download it using the link below:\n[Itinerary Link]({{ $json.link }})\nIf you have any questions or would like to make adjustments, feel free to reach out. I‚Äôm here to help shape the perfect journey for you. \nWarm regards,  \nAndrea",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9344,
        1840
      ],
      "id": "24d1e990-6e84-4e45-819d-ff9221624f20",
      "name": "email body"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "Reply to client email "
            },
            {
              "name": "subject",
              "value": "Your Trip is Confirmed ‚Äì Thank You for Your Payment!"
            },
            {
              "name": "ai reply",
              "value": "={{ $('check status3').item.json.Description }}"
            },
            {
              "name": "project_id",
              "value": "={{ $('get project details4').first().json.project_id }}"
            },
            {
              "name": "client_id",
              "value": "={{ $('get project details4').first().json.client_id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8304,
        1840
      ],
      "id": "c7cd8635-ff80-4a16-98b2-090fe119a858",
      "name": "ingest this email in db"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=*\"You are an expert email copywriter for a Travel and Tour Agency. The following is an existing thank-you email sent to a travel client after receiving their initial payment:\n\nOrignal Email: {{ $('check status3').first().json.Description }}\nChanges requested: {{ $json.text }}\n\nUpdate this email based on the following instructions:\n\nKeep the tone friendly, professional, and personalized unless otherwise specified.\n\nDo not any placeholders like Name, etc \n\nApply any changes to content, tone, style, or formatting as described by the user.\n\nMaintain proper email etiquette and structure.\n\nEnsure clarity, warmth, and customer engagement.\n\nOutput only the updated email text without explanations or extra formatting.\"*"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8032,
        2048
      ],
      "id": "5b83c547-a8df-4333-800c-8e6fbbf8a52d",
      "name": "update thanks email",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        2112
      ],
      "id": "e949a35b-1050-4f58-bc7b-802ce3eb93de",
      "name": "check status3"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblkPdr2TFDq2PZia",
          "mode": "list",
          "cachedResultName": "blueprint",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblkPdr2TFDq2PZia"
        },
        "filterByFormula": "=({project id} = '{{ $json.project_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7904,
        1840
      ],
      "id": "3c5c8946-d42e-4856-ad09-d44de66145d4",
      "name": "get blueprint3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json['client id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8112,
        1840
      ],
      "id": "ee5d140b-43a0-4e16-b0f4-044cd67e1c56",
      "name": "get client details3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({asana task id for payment tracking} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7712,
        1840
      ],
      "id": "ef9f9d12-57c6-434e-8db8-7bbe8f7b59fe",
      "name": "get project details4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('get blueprint3').first().json['client id'] }}",
            "project_id": "={{ $('get blueprint3').first().json['project id'] }}",
            "sender": "={{ $('get project details4').item.json.TD }}",
            "AI Reply": "={{ $('Identify task').first().json.Description }}",
            "Reply subject": "Thank You For Initial Payment"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "final payment recieved",
              "displayName": "final payment recieved",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8528,
        1840
      ],
      "id": "4f3818fc-d9ea-40b4-a79e-dac1870d4d3e",
      "name": "add thank you email to emaisl",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('add thank you email to emaisl').first().json.fields.project_id }} | Itinerary Draft Approval for {{ $('get client details3').first().json.full_name }}",
            "Description": "={{ $json.notes }}",
            "Assignee": "={{ [ { \"email\": $('get project details4').first().json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9552,
        1840
      ],
      "id": "54b3b530-a02d-4e14-8ec0-92bc86f8647f",
      "name": "create task for thank you email1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client id": "={{ $('get client details3').first().json.client_id }}",
            "project id": "={{ $('get blueprint3').first().json['project id'] }}",
            "asana task id": "={{ $json.id }}",
            "itinerary": "={{ $('itinerary generator').first().json.message.content }}",
            "link": "={{ $('HTTP Request').first().json.link }}",
            "file id": "={{ $('HTTP Request').first().json.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9776,
        1840
      ],
      "id": "dc25b56f-b262-4e67-8d14-63dc5d926678",
      "name": "add itinerary in table",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status3').first().json.id }}",
            "Description": "={{ $json.message.content }}",
            "AI Agent Status": "Update Done"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8352,
        2048
      ],
      "id": "e5bae95a-0f5a-48cb-98a1-23df0b417bd5",
      "name": "update thanks task1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "=",
            "project_id": "=",
            "status": "Initial Payment Task Rejected",
            "asana task id for payment tracking": "={{ $json.id }}"
          },
          "matchingColumns": [
            "asana task id for payment tracking"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7712,
        2224
      ],
      "id": "12151eca-eacb-482b-ac28-f41d66494115",
      "name": "update project status2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status3').item.json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8000,
        2224
      ],
      "id": "416af1eb-5bac-4ba3-8567-b5d1d8eec614",
      "name": "delete task2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "Itinerary"
            },
            {
              "name": "project id",
              "value": "={{ $json['project id'] }}"
            },
            {
              "name": "client id",
              "value": "={{ $json['client id'] }}"
            },
            {
              "name": "itinerary",
              "value": "={{ $json.itinerary }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7920,
        2528
      ],
      "id": "8db79696-b13d-411f-abe7-2c24583786f6",
      "name": "ingest in db2"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "blueprints_knowledge_base",
        "toolDescription": "call this vector if any changes in the blueprint is required",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        8832,
        2960
      ],
      "id": "80ef0dc0-7e7b-4de0-8b32-f04a911ece02",
      "name": "Qdrant Vector Store5",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        8848,
        3088
      ],
      "id": "290ada27-fe4e-4fa5-8f2f-f96ce51d3a29",
      "name": "Embeddings OpenAI5",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/convert-to-pdf",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{ $('itinerary udpator').item.json.message.content }}"
            },
            {
              "name": "type",
              "value": "itinerary"
            },
            {
              "name": "client id",
              "value": "={{ $('get project details7').first().json.client_id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9328,
        2800
      ],
      "id": "388b21ed-5cc5-46e6-bb86-f684b5429777",
      "name": "HTTP Request3"
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "value": "={{ $('get itinerary').first().json['file id'] }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        9104,
        2800
      ],
      "id": "1166c542-a2bc-4a18-983c-7e0eebc50ee4",
      "name": "delete previous itinerary",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.html2pdf.app/v1/generate",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "apiKey",
              "value": "njkR5CqDzONsWyebaa9v4zPY2hWhaGQ0NCXtTSgliyPk25Pj7Rma1DlYyibS3hR1"
            },
            {
              "name": "html",
              "value": "={{ $json.message.content }}"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8544,
        2528
      ],
      "id": "fc4874e9-9a28-451d-855c-60e889f0a43c",
      "name": "request to convert into pdf1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an expert travel operations assistant.\n\nTASK:\nRead the provided itinerary text and convert it into a Simplified DMC Blueprint in the form of a clean, styled HTML table.\n\nOUTPUT RULES:\n1. Output ONLY a valid HTML table with <table>, <thead>, <tbody> ‚Äî no extra text before or after.\n2. Include inline CSS styles so the table renders cleanly in both browsers and PDFs:\n   - table { border-collapse: collapse; width: 100%; font-family: Arial, sans-serif; font-size: 12px; }\n   - th, td { border: 1px solid #ddd; padding: 6px; vertical-align: top; }\n   - th { background-color: #f2f2f2; font-weight: bold; text-align: left; }\n3. Use the exact column names and order provided below.\n4. Fill the table day-by-day based on the itinerary.\n5. If any information is missing, write \"N/A\".\n6. Keep each cell short but complete for operational clarity.\n7. Use clear, simple English with no unnecessary words.\n8. Add table border lines its very important.\n\nHTML TABLE STRUCTURE:\n<table>\n  <thead>\n    <tr>\n      <th>Budget</th>\n      <th>Date + Weekday</th>\n      <th>Destination</th>\n      <th>Accommodation</th>\n      <th>Transfers</th>\n      <th>Day Schedule</th>\n      <th>Destinations</th>\n      <th>Activities &amp; Experiences</th>\n      <th>Transportation</th>\n      <th>Guiding</th>\n      <th>Meals</th>\n    </tr>\n  </thead>\n  <tbody>\n    <!-- One row per day -->\n  </tbody>\n</table>\n\nCOLUMN FILLING INSTRUCTIONS:\n- Budget ‚Üí If mentioned, write it; otherwise \"N/A\".\n- Date + Weekday ‚Üí Exact date and weekday from the itinerary.\n- Destination ‚Üí City/town/location for that day.\n- Accommodation ‚Üí Hotel/ryokan name, type of room, stay details.\n- Transfers ‚Üí Main transport details (departure, arrival, time).\n- Day Schedule ‚Üí A short summary of the day‚Äôs plan in 1‚Äì2 sentences.\n- Destinations ‚Üí Main spots/areas visited.\n- Activities & Experiences ‚Üí Key experiences or booked activities.\n- Transportation ‚Üí Transport used during the day.\n- Guiding ‚Üí If a guide is provided, write their name/role.\n- Meals ‚Üí Meals included in the day.\n\nEXAMPLE FOR ONE DAY (HTML):\n<tr>\n  <td>N/A</td>\n  <td>Monday, 13 Oct 2025</td>\n  <td>Tokyo</td>\n  <td>The Park Hotel Tokyo ‚Äì Deluxe City View, breakfast</td>\n  <td>Airport to hotel transfer, 60‚Äì90 min</td>\n  <td>Arrive Tokyo, check-in, evening orientation walk</td>\n  <td>Ginza, Shimbashi</td>\n  <td>Orientation walk, seasonal dinner</td>\n  <td>Airport limousine/private transfer</td>\n  <td>Hotel concierge</td>\n  <td>Dinner (self-pay)</td>\n</tr>\n\nNow, read the itinerary and output the full table in this exact HTML format with styling applied.\n\nItinerary is below:\n{{ $('get project details5').first().json.itinerary }}"
            },
            {
              "content": "Return response in table html only.",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8144,
        2528
      ],
      "id": "ebc1094e-f79b-4116-9fdb-05b5e63573d3",
      "name": "prepare itinerary for DMC",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "name": "=Itinerary for Supplier",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1O3m8K8HaKzaWHRS_G2LrSrxhbFd9aAFj",
          "mode": "list",
          "cachedResultName": "DMC tables",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1O3m8K8HaKzaWHRS_G2LrSrxhbFd9aAFj"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        8768,
        2528
      ],
      "id": "2c5de654-51d9-4e05-9d68-66e1b32ec066",
      "name": "upload file to drive",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9443e40b-3317-45d8-bd26-e378abe3dcc0",
              "name": "Email to Supplier",
              "value": "=Hi,\nWe need proposal for the below itinerary.\n[Itinerary Link]({{ $json.webViewLink }})",
              "type": "string"
            },
            {
              "id": "6b17f689-2994-4148-9183-e849267f5080",
              "name": "file id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "eff80347-01ca-47cb-b82d-69a0fadd231f",
              "name": "link",
              "value": "={{ $json.webViewLink }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8960,
        2528
      ],
      "id": "a2130155-c1fd-467e-8582-dc868b475781",
      "name": "set fields for dmc table"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        2800
      ],
      "id": "9827022a-ac1a-410b-a4bc-d04968c59a0e",
      "name": "check status4"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({asana task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        2528
      ],
      "id": "ab9eb581-b894-4b64-84bd-9cd245151916",
      "name": "get project details5",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $json['project_id'] }} | Add supplier email in Supplier Field",
            "Description": "Please add supplier email in supplier drop down",
            "Assignee": "={{ [ { \"email\": $json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9392,
        2528
      ],
      "id": "41d36152-a78e-4f05-a096-a699a8d03898",
      "name": "create task to get supplier email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({project_id} = '{{ $('get project details5').first().json['project id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9168,
        2528
      ],
      "id": "83d9a463-efaa-46e8-b627-4071c5c1f77d",
      "name": "get project details6",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get project details6').item.json.project_id }} | Itinerary format for Supplier",
            "Assignee": "={{ [ { \"email\": $('get project details6').item.json.TD} ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Description": "={{ $('set fields for dmc table').item.json['Email to Supplier'] }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9632,
        2528
      ],
      "id": "712b4ff3-7a93-4438-94da-84c9b6bc8042",
      "name": "create task for supplier itinerary Approval",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "supplier asana task id": "={{ $('create task to get supplier email').item.json.id }}",
            "client_id": "={{ $('get project details6').first().json.client_id }}",
            "project_id": "={{ $('get project details6').first().json.project_id }}",
            "asana task id for dmc": "={{ $json.id }}",
            "email_number": 0,
            "next_email_index": 0,
            "status": "Itinerary Sent"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9824,
        2528
      ],
      "id": "b5379b03-dd50-46d1-a7b3-a6b33d3750cc",
      "name": "add task id for supplier email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project id": "={{ $json.fields.project_id }}",
            "client id": "={{ $json.fields.client_id }}",
            "supplier itinerary file id": "={{ $('set fields for dmc table').first()\n.json['file id'] }}",
            "supplier itinerary link": "={{ $('set fields for dmc table').first().json.link }}",
            "itinerary for supplier": "={{ $('request to convert into pdf1').first().json.message.content }}",
            "supplier itinerary task id": "={{ $('create task for supplier itinerary Approval').item.json.id }}"
          },
          "matchingColumns": [
            "client id",
            "project id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        10064,
        2528
      ],
      "id": "313b7086-3bf2-4511-bd7a-f883bdc8ee98",
      "name": "add supplier itinerary1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json['client id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8320,
        2800
      ],
      "id": "fa63df89-a42a-4c20-b41d-ff2f8011873d",
      "name": "get client details2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({project_id} = '{{ $('get itinerary').item.json['project id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8544,
        2800
      ],
      "id": "21959840-9bc4-4029-b507-a874618a6b2a",
      "name": "get project details7",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({asana task id} = '{{ $('check status4').first().json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8128,
        2800
      ],
      "id": "780da066-f061-43d9-a23e-93638753312c",
      "name": "get itinerary",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a travel planning assistant.\n\nBelow is a proposed day-by-day family cruise itinerary. A human reviewer has provided feedback requesting some changes or improvements. Your job is to revise the itinerary accordingly, preserving the overall structure and original intent unless requested otherwise.\n\nBe sure to:\n- Keep the trip suitable for a family with young kids (ages 5 and 9).\n- Maintain a luxury and relaxing experience.\n- Avoid extensive walking, per original requirements.\n- Respect any locations, dates, or themes the client wants to keep.\n- Only update days that are requested to be changed.\n\n---\n\nORIGINAL ITINERARY:\n{{ $('get itinerary').first().json.itinerary }}\n\n---\n\nHUMAN FEEDBACK:\n{{ $('latest comment3').first().json.text }}\n\nClient Details With Project Details:\nClient Name: {{ $('get client details2').item.json.full_name }}\nEmail: {{ $('get client details2').item.json.email }}\nPhone: {{ $('get client details2').item.json.phone }}\nLocation: {{ $('get client details2').item.json.client_location }}\nDestination: {{ $json.destination }}\nPreferences: {{ $json.preferences }}\nNumber of Travellers: {{ $json.number_of_travelers }}\nTrip Duration: {{ $json['tript duration'] }}\nTrip Style: {{ $json['tript style'] }}\n---\n\nUPDATED ITINERARY:\n(Please return only the updated full version icluding all days in the same format as the original, no extra commentary.)\n"
            },
            {
              "content": "Update the blueprint with my changes and return only the full, updated version in the same format ‚Äî no duplicates.",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8752,
        2800
      ],
      "id": "1a3e9251-535e-4231-891b-a4a8dcaf5785",
      "name": "itinerary udpator",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1ef5477d-d38b-4760-b3df-d7c1af66b1df",
              "name": "email",
              "value": "=Hi,  \nYour personalized travel blueprint is ready! You can view and download it using the link below:  \n[Updated Itinerary Link]({{ $json.link }})\nIf you have any questions or would like to make adjustments, feel free to reach out. I‚Äôm here to help shape the perfect journey for you.  Warm regards,   Andrea",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9552,
        2800
      ],
      "id": "e538bfe6-627a-40c7-b59b-4fc4492719aa",
      "name": "set description"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status4').first().json.id }}",
            "Description": "={{ $json.email }}",
            "AI Agent Status": "Update Done",
            "Approval Status": "To Do"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9744,
        2800
      ],
      "id": "98359865-ed80-43c1-bb65-5e1f54b7f3db",
      "name": "update itinerary task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project id": "={{ $('get project details7').first().json.project_id }}",
            "client id": "={{ $('get project details7').first().json.client_id }}",
            "file id": "={{ $('HTTP Request3').first().json.id }}",
            "link": "={{ $('HTTP Request3').first().json.link }}",
            "itinerary": "={{ $('itinerary udpator').first().json.message.content }}"
          },
          "matchingColumns": [
            "client id",
            "project id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        10128,
        2800
      ],
      "id": "49392690-e8de-4ef7-9ccc-d75633cbb8bc",
      "name": "update itinerary",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json['client id'] }}",
            "project_id": "={{ $json['project id'] }}",
            "status": "Itinerary Task Rejected"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7904,
        3024
      ],
      "id": "922adb5e-2584-4ab9-a0c3-308ab08d2380",
      "name": "update project status3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status4').first().json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8112,
        3024
      ],
      "id": "61a4e409-fc24-4ac9-bf21-0773a59144e2",
      "name": "delete task3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({asana task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        3024
      ],
      "id": "c5a3486c-bdd4-493e-87d1-71a80ed836c7",
      "name": "get itinerary1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        3280
      ],
      "id": "1796fcb5-5ca3-43f9-b049-f1e84d5ddb62",
      "name": "check status5"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "supplier asana task id": "={{ $('check status5').item.json.id }}",
            "supplier": "={{ $json.Supplier }}"
          },
          "matchingColumns": [
            "supplier asana task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7920,
        3264
      ],
      "id": "7d4c57ed-ebec-4d92-88c0-41c2925e6b26",
      "name": "add supplier email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "0a53cec7-da4d-4d4d-8e42-fb40b7a371db",
              "name": "Supplier",
              "value": "={{ $json.Supplier.join(\", \") }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        7728,
        3264
      ],
      "id": "886e674e-8ab7-455e-99ad-8913e6c9583e",
      "name": "comma separated supplier names"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "Supplier Email"
            },
            {
              "name": "subject",
              "value": "={{ $('Add supplier emails').item.json.fields['Reply subject'] }}"
            },
            {
              "name": "ai reply",
              "value": "={{ $('Add supplier emails').item.json.fields['AI Reply'] }}"
            },
            {
              "name": "project_id",
              "value": "={{ $('get project details8').first().json.project_id }}"
            },
            {
              "name": "client_id",
              "value": "={{ $('get project details8').first().json.client_id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8592,
        3520
      ],
      "id": "d6f91e6e-24e4-490e-883c-ccb0e41bbb48",
      "name": "ingest this email in db1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a precise HTML itinerary editor.  \nYou will be given:  \n1. An existing itinerary in HTML table format.  \n2. A user request describing a specific update.  \n\nYour task:  \n- Make only the requested change in the itinerary.  \n- Keep all other text, formatting, HTML tags, spacing, and structure exactly the same.  \n- Do not reformat the table or add any extra information.  \n- Return the full updated HTML itinerary only, without explanations or additional text.  \n\nUser request:  \n{{ $('latest comment4').item.json.text }}\n\nItinerary:  \n{{ $json['itinerary for supplier'] }}\n\n\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8208,
        3728
      ],
      "id": "0e57d463-35cf-4f78-90f3-34a540986c2e",
      "name": "update itinerary for supplier",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteFile",
        "fileId": {
          "__rl": true,
          "value": "={{ $('get itinerary2').item.json['file id'] }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        8592,
        3728
      ],
      "id": "b8664e32-8070-4f61-a15f-43e94a7b977a",
      "name": "delete previous itinerary1",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.html2pdf.app/v1/generate",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "apiKey",
              "value": "njkR5CqDzONsWyebaa9v4zPY2hWhaGQ0NCXtTSgliyPk25Pj7Rma1DlYyibS3hR1"
            },
            {
              "name": "html",
              "value": "={{ $('update itinerary for supplier').item.json.message.content }}"
            }
          ]
        },
        "options": {
          "response": {
            "response": {
              "responseFormat": "file"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8832,
        3728
      ],
      "id": "0391710d-e254-4d3f-96db-e189a9cd3870",
      "name": "request to convert into pdf"
    },
    {
      "parameters": {
        "name": "={{ $('get itinerary2').item.json['project id'] }} - Itinerary for Supplier",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1O3m8K8HaKzaWHRS_G2LrSrxhbFd9aAFj",
          "mode": "list",
          "cachedResultName": "DMC tables",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1O3m8K8HaKzaWHRS_G2LrSrxhbFd9aAFj"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        9040,
        3728
      ],
      "id": "a873448a-f8a3-4a99-a23e-a8e46c512a1e",
      "name": "upload file to drive1",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "Rw3v033TQ3k7OAZ3",
          "name": "Google Drive account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9443e40b-3317-45d8-bd26-e378abe3dcc0",
              "name": "Email to Supplier",
              "value": "=Hi,\nWe need proposal for the below itinerary. \n[Itinerary Link]({{ $json.webViewLink }})",
              "type": "string"
            },
            {
              "id": "6b17f689-2994-4148-9183-e849267f5080",
              "name": "file id",
              "value": "={{ $json.id }}",
              "type": "string"
            },
            {
              "id": "eff80347-01ca-47cb-b82d-69a0fadd231f",
              "name": "link",
              "value": "={{ $json.webViewLink }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9248,
        3728
      ],
      "id": "0078a587-7c21-4c4d-8c04-f973c5405dd1",
      "name": "set fields for dmc table1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7120,
        3712
      ],
      "id": "30fa47d2-54ef-49c6-b835-745a7d5e615a",
      "name": "check status6"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({supplier itinerary task id} = '{{ $('check status6').first().json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8000,
        3728
      ],
      "id": "d6cf5fad-fe8d-4324-a774-c4a0ce614ffa",
      "name": "get itinerary2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "supplier_itinerary_knowledge_base",
        "toolDescription": "call this tool when updating or creating itinerary for supplier",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        8288,
        3888
      ],
      "id": "8b5d3ad4-1a1b-424c-9446-dbaeb64fb3e7",
      "name": "Qdrant Vector Store2",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        8384,
        4032
      ],
      "id": "88f5ed95-afa0-4334-884b-91b2d19a72c5",
      "name": "Embeddings OpenAI2",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status6').first().json.id }}",
            "Description": "={{ $json['Email to Supplier'] }}",
            "AI Agent Status": "Update Done",
            "Task Status": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9424,
        3728
      ],
      "id": "5467b79d-9f63-4c35-bb61-e1ab44855761",
      "name": "update itinerary task1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "supplier itinerary task id": "={{ $('update itinerary task1').item.json.id }}",
            "supplier itinerary file id": "={{ $('set fields for dmc table1').first().json['file id'] }}",
            "supplier itinerary link": "={{ $('set fields for dmc table1').first().json.link }}",
            "itinerary for supplier": "={{ $('update itinerary for supplier').first().json.message.content }}"
          },
          "matchingColumns": [
            "supplier itinerary task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9872,
        3728
      ],
      "id": "5a482417-e9f0-47f9-b34c-45db680dc19a",
      "name": "update itinerary details",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json['client id'] }}",
            "project_id": "={{ $json['project id'] }}",
            "status": "Supplier Itinerary Task Rejected"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7904,
        3920
      ],
      "id": "a9f119c4-c072-4862-9750-d0023953e529",
      "name": "update project status4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status6').first().json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8080,
        3920
      ],
      "id": "75360846-b192-45ab-bb3d-113475cca377",
      "name": "delete task4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({supplier itinerary task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        3920
      ],
      "id": "5ddf5387-a173-437c-b264-958cb4f19dc1",
      "name": "get itinerary3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblPHqZMmcDBp4fgV",
          "mode": "list",
          "cachedResultName": "Supplier Emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblPHqZMmcDBp4fgV"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.client_id }}",
            "client name": "={{ $json.full_name }}",
            "project_id": "={{ $('get project details8').item.json.project_id }}",
            "sender": "TD",
            "body": "=",
            "AI Reply": "={{ $('check status6').item.json.Description }}",
            "Reply subject": "Propsal Required"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task status",
              "displayName": "asana task status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        3520
      ],
      "id": "c8cef171-ae12-4de0-8c4c-48b033e2a48f",
      "name": "Add supplier emails",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({asana task id for dmc} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        3520
      ],
      "id": "96aeb138-419a-4cdf-a483-1a933adf9639",
      "name": "get project details8",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7952,
        3520
      ],
      "id": "a3c9921d-9a5a-4b0d-957b-6c2b276db9a9",
      "name": "get client details to store in supplier",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('get project details8').item.json.project_id }}",
            "client_id": "={{ $('get project details8').item.json.client_id }}",
            "sent date": "={{ $now.toISO() }}",
            "sla date": "={{ $now.plus({ minutes: 1 }).toISO() }}",
            "escalate date": "={{ $now.plus({ minutes: 5 }).toISO() }}",
            "responded": "No",
            "email_number": 0,
            "next_email_index": 0,
            "status": "Supplier Itinerary Sent"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8384,
        3520
      ],
      "id": "4b22ec08-87ca-4971-97ae-463c104e8b22",
      "name": "add sla date and time",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -208,
        2528
      ],
      "id": "6245b0db-0625-487f-8de8-0634a3ecf791",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "81044e24-974f-4831-9cd9-69791fe1390e",
              "leftValue": "={{ $now.toMillis() > new Date($json[\"sla date\"]).getTime() }}",
              "rightValue": "=",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        464,
        2528
      ],
      "id": "fd98d926-c4a1-4f93-8c10-1c3c67fba7fb",
      "name": "If2"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -224,
        2928
      ],
      "id": "8a83bad9-8159-4f20-be24-c39bf91a9e8b",
      "name": "Schedule Trigger1"
    },
    {
      "parameters": {
        "content": "## SLA Flow\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 920,
        "width": 1720,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -304,
        2304
      ],
      "typeVersion": 1,
      "id": "2f142823-5efd-420e-9cb8-9bd7857736e9",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({responded} = 'No')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        32,
        2528
      ],
      "id": "526da93e-c52d-470c-b379-736b7b5060aa",
      "name": "get suppliers from projects2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        240,
        2528
      ],
      "id": "f43bd023-adf7-4ceb-bfd7-f494fe059f22",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.client_id }}",
            "project_id": "={{ $json.project_id }}",
            "responded": "No"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        640,
        2368
      ],
      "id": "b91e0497-4cea-47df-8fcd-0b2bca427bad",
      "name": "update after 3 days",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9dd9bac4-0bf8-4672-ad84-a5a390fc01b5",
              "name": "notes",
              "value": "=Subject: Follow-Up: Itinerary Proposal For {{ $('If2').item.json.project_id }}\n\nHi,\n\nI hope you‚Äôre doing well. I wanted to follow up regarding the itinerary proposal I shared on [date you sent it]. We haven‚Äôt heard back from you yet, and I wanted to check if you had a chance to review it.\n\nIf there are any questions, adjustments, or clarifications needed, please let me know ‚Äî we‚Äôre happy to work with you to make it fit your requirements.\n\nLooking forward to your response so we can move forward.\n\nBest regards,\nAndrea",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        848,
        2368
      ],
      "id": "929d031d-65f8-4b17-9b04-af4b83df36f2",
      "name": "email content for supplier"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('update after 3 days').item.json.fields.project_id }} | Supplier Did not Responded After 3 Days",
            "Description": "={{ $json.notes }}",
            "Assignee": "={{ [ { \"email\": $('update after 3 days').item.json.fields.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1072,
        2368
      ],
      "id": "9bc4edf3-16a4-4ee2-9706-10dff408d144",
      "name": "create task for 3 days",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({responded} = 'No')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -48,
        2928
      ],
      "id": "e750c675-feb6-4fb1-b834-b72ca72402ad",
      "name": "get suppliers from projects",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        160,
        2928
      ],
      "id": "6875bae7-9eaf-4e91-9079-4b51ff0c8378",
      "name": "Loop Over Items2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "81044e24-974f-4831-9cd9-69791fe1390e",
              "leftValue": "={{ $now.toMillis() > new Date($json[\"escalate date\"]).getTime() }}",
              "rightValue": "=",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        448,
        2944
      ],
      "id": "a98db423-01f8-4f12-a70b-a15ee280d562",
      "name": "If4"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.client_id }}",
            "project_id": "={{ $json.project_id }}",
            "responded": "No"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        752,
        2912
      ],
      "id": "4065ba0d-f09d-483a-90db-52da4875947f",
      "name": "update after 7 days1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "9dd9bac4-0bf8-4672-ad84-a5a390fc01b5",
              "name": "notes",
              "value": "=Subject: Escalation: No Response on Itinerary Proposal for {{ $json.fields.project_id }}\n\nHi,\n\nI hope you‚Äôre doing well. We reached out on [original send date] regarding the itinerary proposal for [project/trip name] and have not received a response in the past 7 days.\n\nAs we have deadlines to meet, we are proceeding with onboarding an alternative supplier to ensure the project stays on track. If you were planning to proceed, please let us know as soon as possible so we can assess next steps.\n\nWe value our relationship with you and hope to collaborate again in the future when timelines align better.\n\nBest regards,\nAndrea",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        944,
        2912
      ],
      "id": "283adccb-097a-4d5e-9b2c-0167f271588e",
      "name": "email content for supplier1"
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('update after 7 days1').item.json.fields.project_id }} | Supplier Did not Responded After 7 Days\n",
            "Description": "={{ $json.notes }}",
            "Assignee": "={{ [ { \"email\": $('update after 7 days1').item.json.fields.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1104,
        2912
      ],
      "id": "fdf3360d-5ae9-4361-9db3-6aa608d3f8b4",
      "name": "create task for 7 days1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "pollTimes": {
          "item": [
            {
              "mode": "everyMinute"
            }
          ]
        },
        "simple": false,
        "filters": {
          "readStatus": "unread"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTrigger",
      "typeVersion": 1.2,
      "position": [
        -160,
        3648
      ],
      "id": "71a1acf3-14f5-423f-ba8f-bd8f37ba1251",
      "name": "TD Email",
      "notesInFlow": true,
      "credentials": {
        "gmailOAuth2": {
          "id": "Fzim1C004MlrxlKn",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst updatedItems = items.map((item) => {\n  const email = item.json;\n  const output = {\n    email_id: email.id,\n    thread_id: email.threadId,\n    from_name: email.from?.value[0]?.name,\n    from_email: email.from?.value[0]?.address,\n    to_email: email.to?.value[0]?.address,\n    subject: email.subject,\n    snippet: email.text,\n    internal_date: email.date,\n    labels: email.labelIds,\n  };\n  return { json: output };\n});\n\nreturn updatedItems;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        80,
        3648
      ],
      "id": "56bbf775-7e0b-4088-a24b-e355ab1dfb64",
      "name": "Get email fields1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a meticulous travel-operations validator.\n\nYou receive TWO texts: an itinerary email and a supplier response. Your job is to normalize both, compare them, and return only the JSON described by output_schema. No prose, no markdown. If something can‚Äôt be determined from either side, treat it as a mismatch.\n\nIgnore project IDs: When reading subjects, first remove any tokens matching /\\bPRJ-\\d{5}\\b/ (and surrounding punctuation/spaces). Do not validate or compare project IDs.\n\nNormalization rules\n\nTrim, lowercase for comparisons where appropriate; ignore redundant whitespace, punctuation variations, and common synonyms (e.g., ‚ÄúB&B‚Äù, ‚Äúbreakfast included‚Äù).\n\nParse dates to ISO YYYY-MM-DD. Recognize ranges like ‚Äú15‚Äì25 March 2026‚Äù, ‚Äú15 to 25 Mar 2026‚Äù.\n\nCompute total_nights = end_date - start_date.\n\nTreat hotel/city names as equal if clearly the same entity despite minor spelling/hyphen/spacing differences.\n\nWhat must MATCH exactly for a PERFECT validation\n\nTrip window: start_date, end_date, and total_nights.\n\nAccommodation coverage: sum of stay nights equals total_nights. If the itinerary lists cities/hotels with date ranges, the supplier must cover the same dates (hotel may differ but city+dates must match).\n\nCore transport legs listed in the itinerary (e.g., key rail/flight segments and private transfers) must be present in the supplier response.\n\nDecision\n\nReturn validation_pass: true only if all checks above match and there are no unresolved differences.\n\nOtherwise return validation_pass: false and include a concise differences[] list describing mismatches.\n\noutput_schema:\n{\n  \"validation_pass\": false,\n  \"differences\": [\n    { \"field\": \"start_date\", \"expected\": \"2026-03-15\", \"found\": \"2026-03-16\", \"note\": \"supplier start date shifted by 1 day\" }\n  ]\n}\nReturn only JSON conforming to output_schema. If perfect, return:\n{ \"validation_pass\": true, \"differences\": [] }\n\nSupplier Responded With:\n{{ $('Get email fields1').first().json.snippet }}\n\n\nOur Proposed Itinerary Plan: \n{{ $json.itinerary }}"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1344,
        3408
      ],
      "id": "aad394bc-2a70-4780-8c07-359f959d4d5d",
      "name": "Proposal Validator",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e4d2b520-acd0-4586-8363-c64184677310",
              "name": "Result",
              "value": "=Proposal recived from Supplier. Validation Required!\n\n{{ $('Get email fields1').first().json.subject }}\n\n\n{{ $('Get email fields1').first().json.snippet }}\n\nItinerary Link: {{ $json.link }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1744,
        3408
      ],
      "id": "1400d824-f548-421d-b9d3-876c6666e232",
      "name": "Set fields for asana"
    },
    {
      "parameters": {
        "jsCode": "const m = $('Get email fields1').first().json.subject?.match(/\\bPRJ-\\d{5}\\b/);\nreturn { projectId: m ? m[0] : null };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        960,
        3408
      ],
      "id": "aef88e82-6d16-4f5c-8907-0cdd8562f803",
      "name": "get project id1"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\n// Collect all bodies and replies\nconst allBodies = items\n  .map(item => item.json.body)\n  .filter(body => body && body.trim() !== \"\")\n  .join(\"\\n---\\n\");\n\nconst allReplies = items\n  .map(item => item.json.AIReply || item.json[\"AI Reply\"])\n  .filter(reply => reply && reply.trim() !== \"\")\n  .join(\"\\n---\\n\");\n\nreturn [\n  {\n    json: {\n      body: allBodies,\n      replies: allReplies,\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1200,
        3968
      ],
      "id": "67baa45b-c6b1-439d-b89e-cdc3d56c6539",
      "name": "Code"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an AI travel agent that replies warmly and professionally to client emails. \nYou will receive the full email thread (including the original itinerary we sent and the client‚Äôs latest reply). \nYour job is to:\n\n1. Detect if the client‚Äôs latest reply is feedback about the itinerary we shared if its a feedback then does it mentioned some changes in the itinerary? if yes then return changes: yes. \n   - If yes, return: feedback on itinerary = \"yes\"\n   - If no, return: feedback on itinerary = \"no\"\n\n2. Generate a warm, client-friendly draft response: \n   - If it is itinerary feedback: acknowledge their comments/questions, show appreciation, and let them know next steps (e.g., making adjustments, confirming details, answering clarifications). \n   - If it is another type of query (not itinerary-related): still generate a warm and professional response based on the previous messages in the thread.\n\nReturn your answer in the following JSON format only (no extra text):\n\n{\n  \"draft_response\": \"<your draft reply here>\",\n  \"feedback_on_itinerary\": \"yes/no\",\n  \"changes_requested\": \"yes/no\",\n  \"draft_response_on_other_response\": \"<your draft reply here if not related to itinerary>\"\n}\n\nLatest Email:\nSubject: {{ $('Get email fields1').first().json.subject }}\nBody: {{ $('Get email fields1').first().json.snippet }}\n\nPrevious conversation with client: \nIcomining Emails: {{ $json.body }}\nAI Replies: {{ $json.replies }}\nProject Status: {{ $('get project of this client').first().json.status }}"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1408,
        3968
      ],
      "id": "2946cc68-e26f-4bcc-a02d-58f5d30b5ffc",
      "name": "determine client response",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6eb27c4a-2bff-4b41-8a86-08376b07b569",
              "leftValue": "={{ $json.message.content.feedback_on_itinerary }}",
              "rightValue": "yes",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "1c2766a5-8375-4a1b-bc38-127f0a594e47",
              "leftValue": "={{ $json.message.content.changes_requested }}",
              "rightValue": "yes",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1808,
        3824
      ],
      "id": "6ae1b142-6cbd-4f1e-b0f7-f9bd33dd2d26",
      "name": "if changes are required"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6eb27c4a-2bff-4b41-8a86-08376b07b569",
              "leftValue": "={{ $json.message.content.feedback_on_itinerary }}",
              "rightValue": "yes",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "1c2766a5-8375-4a1b-bc38-127f0a594e47",
              "leftValue": "={{ $json.message.content.changes_requested }}",
              "rightValue": "no",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1808,
        4160
      ],
      "id": "34e78c37-47df-42b9-b463-19ce51539984",
      "name": "if changes are required1"
    },
    {
      "parameters": {
        "content": "## Travel Designer\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 1020,
        "width": 3016
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -304,
        3328
      ],
      "typeVersion": 1,
      "id": "5656d26e-0f1f-40bf-9017-3abcf380c27a",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=FIND(\"{{ $json.from_email }}\", {supplier}) > 0",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        544,
        3408
      ],
      "id": "642fcb26-efa2-477d-b86e-e377a038c53b",
      "name": "is it supplier",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "= ({email} = '{{ $json.from_email }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        544,
        3968
      ],
      "id": "31f4b2b6-211a-4e65-b4ba-087ba4e3527e",
      "name": "is it client",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $json.project_id }}",
            "client_id": "={{ $json.client_id }}",
            "responded": "Yes"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        768,
        3408
      ],
      "id": "eef19872-e55d-4f59-a9be-58b9fbcb3c6c",
      "name": "supplier responded",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "= ({project id} = '{{ $json.projectId }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1184,
        3408
      ],
      "id": "de548fff-62cb-4f56-b2c7-0385f110097e",
      "name": "get itinerary of that project",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get itinerary of that project').item.json['project id'] }} | Proposal Recieved - Validation Approval",
            "Description": "={{ $json.Result }}",
            "Assignee": "={{ [ { \"email\": $('supplier responded').item.json.fields.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1984,
        3408
      ],
      "id": "de896e33-4aad-4014-89f1-482625c86bd0",
      "name": "supplier responded create task",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client id": "={{ $('get itinerary of that project').first().json['client id'] }}",
            "project id": "={{ $('get itinerary of that project').first().json['project id'] }}",
            "Proposal validator task id": "={{ $json.id }}",
            "proposal": "={{ $('Get email fields1').item.json.subject }}"
          },
          "matchingColumns": [
            "client id",
            "project id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2208,
        3408
      ],
      "id": "833e362f-f34e-4c73-8d3a-ee02b08276c7",
      "name": "save supplier email",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "= ({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        768,
        3968
      ],
      "id": "d4f4db53-93a4-411f-8b81-7673ce4539eb",
      "name": "get project of this client",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "filterByFormula": "= ({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1024,
        3968
      ],
      "id": "7bcef5b2-b350-4a10-8b48-cdbbe65f8dc4",
      "name": "get emails of this client1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get emails of this client1').first().json.project_id }} | Require Changes in Itinerary - Approve Response",
            "Description": "={{ $('determine client response').item.json.message.content.draft_response }}",
            "Assignee": "={{ [ { \"email\": $('get project of this client').first().json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2064,
        3808
      ],
      "id": "70507e54-9135-443f-bb09-8ce387cad6f9",
      "name": "create task for TD1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $('get emails of this client1').first().json.project_id }} | Confirmation for 30% Deposit",
            "Description": "=If the 30% deposit for this project is done then attach the receipt in attachments.",
            "Assignee": "={{ [ { \"email\": $('get project of this client').first().json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2112,
        4192
      ],
      "id": "7caaf7c2-cf30-4388-8c43-c888241bc083",
      "name": "create task for TD",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client id": "={{ $('get emails of this client1').first().json.client_id }}",
            "project id": "={{ $('get emails of this client1').first().json.project_id }}",
            "Reciept task id": "={{ $json.id }}"
          },
          "matchingColumns": [
            "client id",
            "project id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2288,
        4192
      ],
      "id": "d39677d4-e617-4a16-8b5b-cb36fabddf89",
      "name": "reciept task id",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "305ad14e-c10e-4884-b78b-8c06beb32687",
              "name": "Body",
              "value": "=Send this email to Supplier with Requested Changes.\n\n{{ $json.message.content }}\nItinerary: {{ $('get project details3').item.json['supplier itinerary link'] }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8720,
        4448
      ],
      "id": "95bc4937-7553-4be5-b838-5167af85438f",
      "name": "email body1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        4384
      ],
      "id": "def3031a-089f-4809-9170-680124885266",
      "name": "check status7"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({Proposal validator task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        4224
      ],
      "id": "a6c5ab4e-75d3-457a-b5d5-064cdf96962b",
      "name": "get project details1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({project_id} = '{{ $json['project id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7968,
        4224
      ],
      "id": "2d6cdd02-2046-49ca-a64b-b8a5119d0f7a",
      "name": "get travel designer",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $json.project_id }} | Finance File & Client Final Itinerary Compilation",
            "Description": "=Please add Finance file in attachments.\nYou will get the email content that you can send to the client with all details. Here",
            "Assignee": "={{ [ { \"email\": $json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        4224
      ],
      "id": "0d8b279c-04a8-4eb5-8368-ddddc7e610be",
      "name": "create task to get finance file",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('get travel designer').item.json.client_id }}",
            "project_id": "={{ $('get travel designer').item.json.project_id }}",
            "Finance File task id": "={{ $json.id }}"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8400,
        4224
      ],
      "id": "47e124fd-c0c3-4238-b710-bd16981e0b5a",
      "name": "add task id",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({Proposal validator task id} = '{{ $('check status7').first().json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        4448
      ],
      "id": "842825a4-8d7a-4ff4-9ac4-b332106f712c",
      "name": "get project details3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a professional travel operations coordinator. Draft a clear and polite business email to a supplier DMC regarding changes required in an itinerary they previously provided. \n\nContext:\n- The supplier has already sent an itinerary for a trip.\n- We have reviewed it and need certain changes.\n- I will provide the requested changes in bullet points as input.\n- The email should:\n  - Start with a polite greeting.\n  - Acknowledge receipt of the original itinerary.\n  - Clearly list the requested changes in a structured way (e.g., numbered list or bullet points).\n  - Maintain a professional and collaborative tone.\n  - End with an invitation for them to confirm the updated itinerary or raise any clarifying questions.\n  - Include a professional sign-off.\n- DO not add supplier name any where in email.\n- at the end of the email add my name 'Andrea Oschetti'\n\nTour/Project id: {{ $json['project id'] }}\nHere are the requested changes:\n{{ $('latest comment5').item.json.text }}\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8384,
        4448
      ],
      "id": "c57464e5-40ae-426f-8268-2238eb990ce6",
      "name": "draft email changing for suppplier",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status7').first().json.id }}",
            "Description": "={{ $json.Body }}",
            "AI Agent Status": "Update Done",
            "Task Status": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8960,
        4448
      ],
      "id": "3f24914b-5692-453f-b64f-a1ff2fdbc47d",
      "name": "update record",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json['client id'] }}",
            "project_id": "={{ $json['project id'] }}",
            "status": "Supplier Proposal Rejected"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7888,
        4624
      ],
      "id": "5eb3b8c5-9d5f-43f7-987a-fabf50e396ad",
      "name": "update project status5",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "deleteRecord",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "id": "={{ $('check status7').first().json.id }}"
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8064,
        4624
      ],
      "id": "3031c590-8b8e-406a-86ca-0c25dd4c4a23",
      "name": "delete task5",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({Proposal validator task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        4624
      ],
      "id": "edc4cd28-fcbd-4428-bbb3-d543104ed4c9",
      "name": "get project details9",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        8128,
        5568
      ],
      "id": "3b2dc7b4-ed34-49f3-9f4f-a7d76fdd6b6a",
      "name": "OpenAI Chat Model3",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "email_knowledge_base",
        "toolDescription": "call this tool when creating emails content",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        8272,
        5584
      ],
      "id": "f4e03250-aa7a-406d-8d55-97e4de8200ef",
      "name": "Qdrant Vector Store6",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        8272,
        5728
      ],
      "id": "1c1e84df-aa83-46bf-973a-7338d3935324",
      "name": "Embeddings OpenAI6",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are an AI travel assistant. \nA client has booked a trip with the following details:\n\nClient Name: {{ $json.full_name }}\nProject id: {{ $('get details using id1').item.json.project_id }}\nDestination: {{ $('get details using id1').item.json.destination }}\nTrip Dates: {{ $('get details using id1').item.json.travel_dates }}\nIntent: {{ $('get details using id1').item.json.intent }}\nPreferences: {{ $('get details using id1').item.json.preferences }}\nBudget: {{ $('get details using id1').item.json.budget }}\nNo. of Travellers: {{ $('get details using id1').item.json.number_of_travelers }}\nTrip Duration: {{ $('get details using id1').item.json['tript duration'] }}\nClient Type: {{ $('get details using id1').item.json['client type'] }}\nTrip Style: {{ $('get details using id1').item.json['tript style'] }}\nSeason: {{ $('get details using id1').item.json.season }}\n\nGenerate a sequence of 10 anticipation emails to send before the trip. \nEach email should: \n- Be warm, friendly, and personalized. \n- Have a subject line and body text. \n- Be 150‚Äì200 words max. \n- Build excitement, share tips, or highlight experiences. \n- Progress naturally from confirmation to final pre-departure.\n\nReturn the result as **valid JSON only** in this format:\n\n{\n  \"emails\": [\n    {\n      \"email\": 1,\n      \"subject\": \"...\",\n      \"body\": \"...\"\n    },\n    {\n      \"email\": 2,\n      \"subject\": \"...\",\n      \"body\": \"...\"\n    },\n    {\n      \"email\": 3,\n      \"subject\": \"...\",\n      \"body\": \"...\"\n    },\n    ...\n    {\n      \"email\": 10,\n      \"subject\": \"...\",\n      \"body\": \"...\"\n    }\n  ]\n}\n\nit should be json formato do not write any thing else\n",
        "options": {
          "systemMessage": "Generate 10 pre trip emails using project and trip flow"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.8,
      "position": [
        8160,
        5408
      ],
      "id": "638c05ff-015a-4be5-8056-5f46e58a681d",
      "name": "Emails creator"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "17a2d871-534a-4371-aef8-5c8485350d6e",
              "name": "email",
              "value": "=Hi {{ $('get client details4').first().json.full_name }},\n\nI hope you‚Äôre doing well.\n\nPlease find attached your travel itinerary along with the detailed budget/finance breakdown for your upcoming trip. This document outlines the planned activities, accommodations, transportation, and associated costs for your review.\n\nKindly go through the details at your convenience and let us know if you have any questions or if you would like to make any adjustments. We‚Äôll be happy to refine the plan to ensure it perfectly matches your preferences.\n\nWe look forward to your feedback so we can proceed with the next steps.\n\nBest regards,\n\nItinerary: [{{ $json.link }}]({{ $json.link }})\n\nBudget Details: [{{ encodeURI($('check status8').item.json.Attachments[0].url) }}]({{ encodeURI($('check status8').item.json.Attachments[0].url) }})\n",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8400,
        5008
      ],
      "id": "64e293e5-8979-47d9-bda3-b2d75c8a0a25",
      "name": "extract email6"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        4864
      ],
      "id": "94f30e97-1f8e-40c1-95b7-93ce1097b43f",
      "name": "check status8"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({Finance File task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        5008
      ],
      "id": "d2d79d30-80a2-43e0-acc1-f3ff3d59e482",
      "name": "get project details11",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7952,
        5008
      ],
      "id": "c6c3865e-e656-4e07-b525-1ca1596e5cad",
      "name": "get client details4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({client id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        5008
      ],
      "id": "2667686d-2ef7-490d-a331-ac9debdf0cc8",
      "name": "get client details5",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('check status8').item.json.id }}",
            "Description": "={{ $json.email }}",
            "AI Agent Status": "Update Done",
            "Task Status": false
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8608,
        5008
      ],
      "id": "9f3436e1-4b9f-4f89-ae5c-9c1c84ade0fc",
      "name": "update record1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project id": "={{ $('get client details5').item.json['project id'] }}",
            "client id": "={{ $('get client details5').item.json['client id'] }}",
            "Financial file": "={{ $('check status8').item.json.Attachments[0].url }}"
          },
          "matchingColumns": [
            "project id",
            "client id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8864,
        5008
      ],
      "id": "1c92fe9c-4e57-47ed-9360-ce25abae619a",
      "name": "add finance file",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        5168
      ],
      "id": "b0d82545-66c0-4ccb-9d83-034cb1d93e47",
      "name": "check status9"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "filterByFormula": "=({Reciept task id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        5200
      ],
      "id": "a27c16a9-86e8-48b3-9531-67543ce6a723",
      "name": "get details using id",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblLcpA5SRNPW50uD",
          "mode": "list",
          "cachedResultName": "itinerary",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblLcpA5SRNPW50uD"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project id": "={{ $json['project id'] }}",
            "client id": "={{ $json['client id'] }}",
            "Financial file": "=",
            "Reciept": "={{ $('check status9').item.json.Attachments[0].url }}"
          },
          "matchingColumns": [
            "project id",
            "client id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client id",
              "displayName": "client id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project id",
              "displayName": "project id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary",
              "displayName": "itinerary",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "link",
              "displayName": "link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "file id",
              "displayName": "file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "itinerary for supplier",
              "displayName": "itinerary for supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary link",
              "displayName": "supplier itinerary link",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary file id",
              "displayName": "supplier itinerary file id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier itinerary task id",
              "displayName": "supplier itinerary task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Proposal validator task id",
              "displayName": "Proposal validator task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "proposal",
              "displayName": "proposal",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept task id",
              "displayName": "Reciept task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reciept",
              "displayName": "Reciept",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financial file",
              "displayName": "Financial file",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7952,
        5200
      ],
      "id": "f9eabf50-4e2a-4a9e-8a14-7a00757d4edc",
      "name": "add reciept",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $json.project_id }} | Send the Final Visual Itinerary to Client - {{ $json.client_id }}",
            "Description": "Complete this task when the final itinerary is sent to client",
            "Assignee": "={{ [ { \"email\": $json.TD } ] }}",
            "Priority": "High",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8384,
        5200
      ],
      "id": "73a5c11d-aab2-42ce-af80-6970ddaa0fd1",
      "name": "create task for final itinerary sent",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "= ({project_id} = '{{ $('get details using id').item.json['project id'] }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8160,
        5200
      ],
      "id": "f4447b3c-ab0b-47db-9648-92395bb379af",
      "name": "get td",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('get td').item.json.project_id }}",
            "client_id": "={{ $('get td').item.json.client_id }}",
            "Final Itinerary Sent Task Id": "={{ $json.id }}",
            "email_number": 0,
            "next_email_index": 0,
            "status": "30% Deposit Done"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8608,
        5200
      ],
      "id": "7fea05be-a662-4091-9a6d-cb3dabd6643b",
      "name": "add task id1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "Track-asana-task",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        4480,
        2784
      ],
      "id": "fcf7464b-3219-4c06-bff7-a444721fceab",
      "name": "Webhook2",
      "webhookId": "2e180c0e-b437-4723-afdb-12ac83b65fc1"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        5488
      ],
      "id": "9de25e87-470a-4a2a-9ee2-20cfba741434",
      "name": "check status10"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({Final Itinerary Sent Task Id} = '{{ $json.id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        5440
      ],
      "id": "1a95fd49-d425-41c4-b262-ed26710b2d47",
      "name": "get details using id1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "filterByFormula": "=({client_id} = '{{ $json.client_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7888,
        5440
      ],
      "id": "09ebf4cd-feb6-49f2-9015-c6266dad2119",
      "name": "get client details6",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('get details using id1').item.json.client_id }}",
            "project_id": "={{ $('get details using id1').item.json.project_id }}",
            "pre-trip emails": "={{ $json.output }}",
            "Final Payment Status": "Not Paid"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8528,
        5408
      ],
      "id": "90b41aae-22b0-45b7-9017-b81d4c5d19d9",
      "name": "add 10 emails",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $json.fields.project_id }} | Final Payment Confirmation",
            "Description": "Complete this task when the final payment is done.",
            "Assignee": "={{ [ { \"email\": $('get details using id1').first().json.TD } ] }}",
            "Priority": "High",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8768,
        5408
      ],
      "id": "dfd3c9e8-5410-4775-a740-e950b0ca19b5",
      "name": "create task for final payment",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('get details using id1').item.json.project_id }}",
            "client_id": "={{ $('get details using id1').item.json.client_id }}",
            "Final Itinerary Sent Task Id": "=",
            "Final Payment Task id": "={{ $json.id }}",
            "Final Payment Status": "No",
            "email_number": 0,
            "next_email_index": 0,
            "status": "Final Visual Itinerary Sent"
          },
          "matchingColumns": [
            "project_id",
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8992,
        5408
      ],
      "id": "61eb267d-7b51-41a0-8b6f-b40785485215",
      "name": "add task id2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        5744
      ],
      "id": "f0690447-cb29-466d-b794-58bbc5dbcdf7",
      "name": "check status11"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Final Payment Task id": "={{ $json.id }}",
            "Final Payment Status": "Paid",
            "status": "Final Payment Done",
            "responded": "Yes",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "Final Payment Task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        5744
      ],
      "id": "09aa394b-3401-4cc4-952d-79bd561d6b08",
      "name": "update status",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 12
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -144,
        4880
      ],
      "id": "b96b733d-61c2-4bfc-ac74-1d58418f465f",
      "name": "Schedule Trigger2"
    },
    {
      "parameters": {
        "content": "## 10 pre trip emails\n\n**Double click** to edit me. [Guide](https://docs.n8n.io/workflows/sticky-notes/)",
        "height": 840,
        "width": 3020
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -304,
        4384
      ],
      "typeVersion": 1,
      "id": "125e08a9-f53d-4550-85d8-d1d832c89910",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({Final Payment Status} = 'No')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        80,
        4880
      ],
      "id": "de67f395-e607-46d1-94bf-7331021eedab",
      "name": "get trips where final payment is not done1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c5eb315f-bef5-4598-bafe-3afe95ae0b0c",
              "leftValue": "={{ ( $json.email_number ? Number($json.email_number) : 0 ) <= 10 }}",
              "rightValue": 11,
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        320,
        4880
      ],
      "id": "7f2fd744-7aa8-4738-91ab-7c58a6cf9b03",
      "name": "If6"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        544,
        4784
      ],
      "id": "031d6c39-620d-4d99-987e-8a80bb6e9bbb",
      "name": "Loop Over Items3"
    },
    {
      "parameters": {
        "jsCode": "return items.map(item => {\n  const travelDates = item.json.travel_dates; // e.g. \"22-09-2026 to 02-10-2026\"\n\n  if (!travelDates) {\n    item.json.trip_in_future = false;\n    return item;\n  }\n\n  // Extract start date (before \" to \")\n  const startDateStr = travelDates.split(\" to \")[0]; // \"22-09-2026\"\n  const [day, month, year] = startDateStr.split(\"-\");\n\n  // Convert to ISO-friendly format: yyyy-mm-dd\n  const tripStartDate = new Date(`${year}-${month}-${day}T00:00:00Z`);\n  const now = new Date();\n\n  // Boolean flag\n  item.json.trip_in_future = tripStartDate > now;\n\n  return item;\n});\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        4784
      ],
      "id": "0806381d-3b84-431c-b1df-6850c98b4bee",
      "name": "check trip date and now"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ed4898cb-f989-4666-80dd-acf7e63c8acb",
              "leftValue": "={{ $json.trip_in_future }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        944,
        4784
      ],
      "id": "ece62e2b-6e34-4175-ac7f-0e0d9f77b178",
      "name": "If5"
    },
    {
      "parameters": {
        "jsCode": "// Travel dates from If4 node\nconst travelDates = $('If5').first().json.travel_dates; \n// Example: \"22-09-2026 to 02-10-2026\"\n\n// Helper: parse DD-MM-YYYY ‚Üí Date\nfunction parseDate(str) {\n  const [day, month, year] = str.split(\"-\");\n  return new Date(`${year}-${month}-${day}T00:00:00Z`);\n}\n\nconst [startStr] = travelDates.split(\" to \");\nconst tripStart = parseDate(startStr.trim());\n\nconst now = new Date();\nconst totalEmails = 10;\n\n// Interval between emails\nconst diffMs = tripStart.getTime() - now.getTime();\nconst intervalMs = diffMs / totalEmails;\n\n// Previous state from Sheets (or empty on first run)\nconst prev = $('If5').first().json;\n\nlet emailNumber = prev.email_number || null;\nlet nextEmailIndex = prev.next_email_index ?? null;\nlet lastEmailSentAt = prev.last_email_sent_at || null;\nlet nextEmailScheduledAt = prev.next_email_scheduled_at || null;\n\nlet sendEmail = false;\n\n// --- First email case ---\nif (!emailNumber || !nextEmailScheduledAt) {\n  emailNumber = 1;\n  nextEmailIndex = 1;\n  lastEmailSentAt = now.toISOString();\n  nextEmailScheduledAt = new Date(now.getTime() + intervalMs).toISOString();\n  sendEmail = true;\n} \n// --- Subsequent emails ---\nelse {\n  const nextDate = new Date(nextEmailScheduledAt);\n\n  if (now >= nextDate) {\n    emailNumber = prev.next_email_index + 1;\n    lastEmailSentAt = nextDate.toISOString();\n    nextEmailIndex = (emailNumber < totalEmails) ? prev.next_email_index + 1 : null;\n    nextEmailScheduledAt = (nextEmailIndex !== null)\n      ? new Date(nextDate.getTime() + intervalMs).toISOString()\n      : null;\n    sendEmail = true;\n  } else {\n    // Not time yet\n    emailNumber = prev.email_number;\n    nextEmailIndex = prev.next_email_index;\n    lastEmailSentAt = prev.last_email_sent_at;\n    nextEmailScheduledAt = prev.next_email_scheduled_at;\n    sendEmail = false;\n  }\n}\n\n// Return only metadata\nreturn [{\n  json: {\n    email_number: emailNumber,\n    next_email_index: nextEmailIndex,\n    last_email_sent_at: lastEmailSentAt,\n    next_email_scheduled_at: nextEmailScheduledAt,\n    send_email: sendEmail\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1280,
        4608
      ],
      "id": "b30d909a-ae3b-4082-9f21-7e540bfed56c",
      "name": "calculate values"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "filterByFormula": "=({project_id} = '{{ $json.project_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1104,
        4608
      ],
      "id": "fbfc2f2c-2c9a-4dbf-92af-42811af9ad36",
      "name": "Airtable3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6baf2a4c-2439-4b3d-9509-f9f0ee5f1a19",
              "leftValue": "={{ $json.send_email }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1520,
        4608
      ],
      "id": "87e32bf3-7de1-44b1-9430-f63468d75927",
      "name": "If7"
    },
    {
      "parameters": {
        "jsCode": "// Parse pre-trip emails JSON string safely\nlet emailsData;\ntry {\n  emailsData = JSON.parse($json[\"pre-trip emails\"]);\n} catch (e) {\n  return [{ json: { error: \"Invalid pre-trip emails JSON\" } }];\n}\n\nconst emails = emailsData.emails || [];\n\n// Fallback to 0 if not set\nconst nextIndex = $json.next_email_index || 0;\n\nif (emails[nextIndex]) {\n  return [\n    {\n      json: {\n        row_number: $json.row_number,\n        project_id: $json.project_id,\n        client_id: $json.client_id,\n        subject: emails[nextIndex].subject,\n        body: emails[nextIndex].body,\n        email_number: emails[nextIndex].email,\n        next_email_index: nextIndex + 1, // increment for next run\n        last_email_sent_at: new Date().toISOString()\n      }\n    }\n  ];\n} else {\n  return [\n    {\n      json: {\n        row_number: $json.row_number,\n        project_id: $json.project_id,\n        client_id: $json.client_id,\n        message: \"No more emails to send\",\n        next_email_index: nextIndex\n      }\n    }\n  ];\n}\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2000,
        4592
      ],
      "id": "06a2b9de-7d46-4828-9f0a-1ce4661e15f6",
      "name": "extract relevant email"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "filterByFormula": "=({project_id} = '{{ $('If5').first().json.project_id }}')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1808,
        4592
      ],
      "id": "6130c9cf-1916-44f1-be7c-585ed2c3a183",
      "name": "get pre trip emails",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | {{ $json.project_id }} | Send the Pre-Trip Email({{ $json.email_number }}) to the client - {{ $json.client_id }}",
            "Description": "=Subject: {{ $json.subject }}\nBody: {{ $json.body }}",
            "Assignee": "={{ [ { \"email\": $('get pre trip emails').item.json.TD } ] }}",
            "Priority": "High",
            "Approval Status": "To Do",
            "Due Date": "={{ $now.plus({ hours: 24 }).toISO() }}",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2224,
        4592
      ],
      "id": "b7258c19-92c2-40e0-b8e5-c0d066178a3f",
      "name": "create task for email send",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('extract relevant email').item.json.client_id }}",
            "project_id": "={{ $('extract relevant email').item.json.project_id }}",
            "email_number": "={{ $('calculate values').first().json.email_number }}",
            "next_email_index": "={{ $('calculate values').first().json.next_email_index }}",
            "last_email_sent_at": "={{ $('calculate values').first().json.last_email_sent_at }}",
            "next_email_scheduled_at": "={{ $('calculate values').first().json.next_email_scheduled_at }}"
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2448,
        4592
      ],
      "id": "2cee0fe0-5205-4647-9aad-3e610d6318fc",
      "name": "update data",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "height": 6500,
        "width": 6380,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4320,
        -64
      ],
      "typeVersion": 1,
      "id": "de3cef06-19c9-4ccf-bd15-cefd98c081f1",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8208,
        144
      ],
      "id": "8cab4bfd-6a06-474e-a989-a4b961d786de",
      "name": "completed",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status1').item.json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8128,
        912
      ],
      "id": "98870af0-0b17-4c5d-887c-bd4e039fcc44",
      "name": "completed1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status2').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8928,
        1552
      ],
      "id": "7dae80d2-6490-49b6-8d65-8033e80e4aa4",
      "name": "completed2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status3').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9984,
        1840
      ],
      "id": "8c44192b-dc6f-4c4a-a23f-65bf8bb700fe",
      "name": "completed3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status4').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        10320,
        2528
      ],
      "id": "6cce0750-8be5-4025-a005-7847bf540afb",
      "name": "completed4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status6').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8848,
        3520
      ],
      "id": "3a7a9630-9666-4abc-a4e1-61c34838cf06",
      "name": "completed5",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status5').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8192,
        3264
      ],
      "id": "14b3b157-a723-4763-9d0c-c8f72a3f0222",
      "name": "completed6",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status7').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8688,
        4224
      ],
      "id": "b5db88a9-7a9f-41e7-81c5-3177641e3fe3",
      "name": "completed7",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status8').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        4848
      ],
      "id": "23c1fa87-1346-404a-907f-b0b71a987889",
      "name": "completed8",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status9').item.json.id }}",
            "AI Agent Status": "Done",
            "Approval Status": "Approved"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8848,
        5200
      ],
      "id": "2c683f02-1499-470e-af16-02e56ac5b025",
      "name": "completed9",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status10').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        9184,
        5408
      ],
      "id": "49d77e3d-2bc5-4615-99bf-9f702086dec5",
      "name": "completed10",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status11').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7920,
        5744
      ],
      "id": "7ca40b02-da1a-4429-835e-2f9a6a6d5f47",
      "name": "completed11",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Approved",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "71667545-584a-493f-80d6-a780e4e5b81e"
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "093ce830-c87f-461c-a248-5bce464628a6",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c6eaed3a-f159-41c6-94e6-99d8d7575765",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Reject",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "14fab085-3493-4e69-870f-7d1d38224263",
                    "leftValue": "={{ $json['Approval Status'] }}",
                    "rightValue": "Update DONE!",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              }
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        7104,
        6032
      ],
      "id": "9e8856bc-86ef-4d17-b9f0-33721e331f1e",
      "name": "check status12"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": true,
            "id": "={{ $('check status12').first().json.id }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "Update Done!",
                  "value": "Update Done!"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Update Comments",
              "displayName": "Update Comments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7728,
        5968
      ],
      "id": "08b99fc6-cc32-4a38-a938-d3bdb0000bcf",
      "name": "completed12",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are an email editor.  \nYou will be given two inputs:  \n1. The current full email content.  \n2. An edit instruction (human comment).  \n\nYour task:\n- Make only the changes explicitly requested in the comment.\n- Do not make any other changes.\n- Keep the rest of the email **exactly** as it is ‚Äî same wording, formatting, spacing, punctuation, and line breaks.\n- Return the full updated email, not just the edited part.\n- Do not add extra commentary or notes.\n\n---\n\nCURRENT EMAIL:\n{{ $('check status12').item.json.Description }}\n\nCOMMENT / EDIT INSTRUCTION:\n{{ $json.text }}\n\n---\n\nNow apply the requested changes and return the entire updated email exactly as it should appear. \n\n- Note: Return in the same format same to same email just update what is asked to update and then return the full content as it is nothing extra commentry!\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8160,
        6144
      ],
      "id": "b4880f12-342b-4a7f-8abc-8967e52feaad",
      "name": "OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Status": false,
            "id": "={{ $('check status12').item.json.id }}",
            "Description": "={{ $json.message.content }}",
            "AI Agent Status": "Update Done"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": true
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8528,
        6144
      ],
      "id": "94f25e44-1ae2-4655-8d71-2fc754e3fdd2",
      "name": "Airtable4",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7520,
        352
      ],
      "id": "79a01d89-0f65-485e-93a5-6b234a1376f0",
      "name": "request to get comments"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7760,
        352
      ],
      "id": "bef9a5cc-3b60-449a-9d89-a21ff8b6ad4b",
      "name": "latest comment"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \"1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8832,
        352
      ],
      "id": "54c47cc0-a015-4d5a-8c59-a35b46690998",
      "name": "updated comment"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7728,
        1088
      ],
      "id": "379c4b67-5e1d-4ef2-b13f-e19379c34258",
      "name": "request to get comments1"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7968,
        1088
      ],
      "id": "77fcd260-fd4d-4685-a431-522c4916eaf7",
      "name": "latest comment1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \"Blueprint Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        10064,
        1088
      ],
      "id": "e7f3f6f6-4836-408f-815d-5b844b19e878",
      "name": "updated comment1"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7680,
        2048
      ],
      "id": "3b745d74-21e5-42cb-b22b-a133f504924d",
      "name": "request to get comments2"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7872,
        2048
      ],
      "id": "afd1ac55-7c31-4b69-a0f5-2cf3792ae267",
      "name": "latest comment2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \"Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8608,
        2048
      ],
      "id": "c79950f0-0680-4502-beb0-1ffbb906cbdf",
      "name": "updated comment2"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7728,
        2800
      ],
      "id": "b07bae85-dbf4-4754-98e1-49a28d22e008",
      "name": "request to get comments3"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7904,
        2800
      ],
      "id": "dbdce987-9be3-44c1-bd25-2fa492bd511c",
      "name": "latest comment3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \"Itinerary Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9952,
        2800
      ],
      "id": "abbeec3c-1321-4682-8890-69cabb2b0f59",
      "name": "updated comment3"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7600,
        3728
      ],
      "id": "cc8a06c0-95dc-401e-8273-2ca8de92b81e",
      "name": "request to get comments4"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7792,
        3728
      ],
      "id": "3c08cce7-916d-4c65-9160-1e69faa697e6",
      "name": "latest comment4"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \"Itinerary Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9632,
        3728
      ],
      "id": "9f44a400-95bc-4ca3-98ce-a51d82055fb8",
      "name": "updated comment4"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7728,
        4448
      ],
      "id": "7d50e2ae-d52f-461f-830d-2545af5adbc3",
      "name": "request to get comments5"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7904,
        4448
      ],
      "id": "c57815be-e2cc-4d2f-b0c5-aa942fe09216",
      "name": "latest comment5"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \" Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        9200,
        4448
      ],
      "id": "b27edeb0-3f84-4b8f-9fc4-d528db922b2b",
      "name": "updated comment5"
    },
    {
      "parameters": {
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        7744,
        6144
      ],
      "id": "4f014ab8-e2ad-47ae-a00d-afe646645880",
      "name": "request to get comments6"
    },
    {
      "parameters": {
        "jsCode": "// Get the input data from the first item\nconst comments = $json.comments;\n\nif (comments && comments.length > 0) {\n  // Sort the comments by 'createdTime' in descending order\n  comments.sort((a, b) => new Date(b.createdTime) - new Date(a.createdTime));\n\n  // Get the latest comment (the first item after sorting)\n  const latestComment = comments[0];\n\n  // Return the latest comment\n  return [{\n    json: latestComment\n  }];\n} else {\n  // If there are no comments, return an empty array\n  return [];\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        7968,
        6144
      ],
      "id": "e14b95c5-58c5-4b23-89a5-0bfda8c18366",
      "name": "latest comment6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "= https://api.airtable.com/v0/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0/{{ $json.id }}/comments",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer patXBSY3ypeatsQAA.b76453184871af79409fb4efffcb32890bea2277dda6174171b6ca60c518815c"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"text\": \" Updated!\\n1- Add more comments for any update and set status to 'Update'\\n2- Set status to 'Approved'\\n3- Reject in case of Rejection\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8752,
        6144
      ],
      "id": "5eb91a4d-e9e6-409d-84ac-e23ebf5ce7a3",
      "name": "updated comment6"
    },
    {
      "parameters": {
        "options": {
          "responseMode": "lastNode"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        0,
        5328
      ],
      "id": "222420f4-a945-4e27-aa7d-d6005b0cd6fa",
      "name": "When chat message received",
      "webhookId": "af51f115-a911-4779-94b5-e37cd7355ee6"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "={{ $json.chatInput }}"
            },
            {
              "content": "Anser user queries with attached tool",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        208,
        5328
      ],
      "id": "a2a3e0f2-ea73-45f2-8ae9-effe34dcb683",
      "name": "Message a model",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Call this tool to answer user queries",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        272,
        5488
      ],
      "id": "42f1e555-0d97-4a0d-8045-5e4b6b1484ac",
      "name": "Qdrant Vector Store7",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        320,
        5664
      ],
      "id": "41e74570-090a-45b6-a6c9-346f9a5cc0e7",
      "name": "Embeddings OpenAI7",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "62c31ecd-b079-4615-96d1-530a2fdfc3a5",
              "name": "result",
              "value": "={{ $json.message.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        560,
        5328
      ],
      "id": "0263f2c0-beb9-4a15-9b1b-a5216a326e22",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a classification AI for an AI-powered travel agency.\n\nYou will receive:\n- The email subject\n- The email body\n- The sender email address\n- A note on whether the sender email address exists in our client database (true = existing client, false = new client)\n\nYour task:\nReturn ONLY:\n{\n  \"new_tour\": \"yes\" or \"no\"\n}\n\nRules:\n1. If the sender is NOT in our database (new client), do NOT classify here. Just return:\n{\n  \"new_tour\": \"no\"\n}\n\n2. If the sender IS an existing client:\n   - Output \"yes\" if ANY of the following are true:\n     ‚Ä¢ The email clearly indicates they want to book, plan, or inquire about a **new tour/trip/project** (mentions new destinations, new dates, or a trip different from previous records).\n     ‚Ä¢ The subject matches or includes ANY of these phrases:\n         - \"You have received a new trip inquiry from a WendyPerrin.com\"\n         - \"An enquiry has been submitted on Blueflower.la\"\n         - \"NOW MANUALLY\"\n         - \"A New Wendy Perrin referral\"\n         - \"Enquiry received through Wonder Magazine\"\n     ‚Ä¢ The body text shows intent for a new trip, e.g., discussing a new travel destination, date range, budget, or itinerary unrelated to an ongoing booking.\n\n   - Output \"no\" if:\n     ‚Ä¢ They are only continuing discussion about their current or past tour (updates, payments, confirmations, questions about ongoing trip).\n     ‚Ä¢ It‚Äôs general communication, feedback, or post-trip follow-up.\n     ‚Ä¢ It is spam, irrelevant, promotional, cold outreach, or from automation platforms like Airtable, Asana, etc.\n\nReturn only in this JSON format:\n{\n  \"new_tour\": \"yes\"\n}\nor\n{\n  \"new_tour\": \"no\"\n}\n\nEmail Details:\nSender: {{ $('Get email fields').item.json.from_email }}\nSubject: {{ $('Get email fields').item.json.subject }}\nBody: {{ $('Get email fields').item.json.snippet }}\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        704,
        128
      ],
      "id": "44c3688d-62c2-4558-a877-c04605aed108",
      "name": "do existing client wants a new tour",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0d14d85a-2706-413f-8aa0-409b33b34195",
              "leftValue": "={{ $json.message.content.new_tour }}",
              "rightValue": "yes",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1056,
        128
      ],
      "id": "bed95ab1-1ec2-4148-8f81-a392eb86775e",
      "name": "If3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "new client email"
            },
            {
              "name": "client_id",
              "value": "={{ $json.fields.client_id }}"
            },
            {
              "name": "project_id",
              "value": "={{ $json.fields.project_id }}"
            },
            {
              "name": "email_id",
              "value": "={{ $json.fields['email_id '] }}"
            },
            {
              "name": "thread_id",
              "value": "={{ $json.fields.thread_id }}"
            },
            {
              "name": "sender email",
              "value": "={{ $json.fields.sender }}"
            },
            {
              "name": "email subject",
              "value": "={{ $json.fields.subject }}"
            },
            {
              "name": "email body",
              "value": "={{ $json.fields.body }}"
            },
            {
              "name": "timestamp",
              "value": "={{ $json.fields.timestamp }}"
            },
            {
              "name": "client name",
              "value": "={{ $('crm for clients1').first().json.fields.full_name }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2944,
        -32
      ],
      "id": "6d8c9ed2-15cf-447f-843d-bd0b1edad50c",
      "name": "Ingest client email2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://aiagents.app.n8n.cloud/webhook/ingest_in_db",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "type",
              "value": "new project"
            },
            {
              "name": "client_id",
              "value": "={{ $json.metadata.client_id }}"
            },
            {
              "name": "project_id",
              "value": "={{ $json.metadata.project_id }}"
            },
            {
              "name": "destination",
              "value": "={{ $('crm for projects').first().json.fields.destination }}"
            },
            {
              "name": "travel dates",
              "value": "={{ $('crm for projects').first().json.fields.travel_dates }}"
            },
            {
              "name": "status",
              "value": "={{ $('crm for projects').first().json.fields.status }}"
            },
            {
              "name": "budget",
              "value": "={{ $('crm for projects').first().json.fields.budget }}"
            },
            {
              "name": "client intent",
              "value": "={{ $('crm for projects').first().json.fields.intent }}"
            },
            {
              "name": "client preferences",
              "value": "={{ $('crm for projects').first().json.fields.preferences }}"
            },
            {
              "name": "number of travelers",
              "value": "={{ $('crm for projects').first().json.fields.number_of_travelers }}"
            },
            {
              "name": "client name",
              "value": "={{ $('crm for clients1').first().json.fields.full_name }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3152,
        -32
      ],
      "id": "e1e62f4a-d159-4f36-9f4c-ef1e5dc84b60",
      "name": "ingest new project data1"
    },
    {
      "parameters": {
        "jsCode": "// Generate a random number between 1 and 99999\nconst randomNum = Math.floor(Math.random() * 99999) + 1;\n\n// Pad with leading zeros to ensure 5 digits\nconst paddedId = randomNum.toString().padStart(5, '0');\n\n// Build final project ID\nconst projectId = `PRJ-${paddedId}`;\n\n// Return only project ID\nreturn [\n  {\n    json: {\n      project_id: projectId\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1632,
        -32
      ],
      "id": "5e3c586a-121c-494c-9095-b70f91c794f9",
      "name": "generate client and project id1"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "GPT-5-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a highly efficient travel advisor assistant working for a premium travel agency.  \nA client has emailed us with a travel inquiry.  \n\nYou must perform **two actions**:\n\n---\n\n### ‚úâÔ∏è 1. Draft a warm and professional acknowledgment email (exactly 3 short paragraphs)\n\nEmail rules:\n- Greet the client: use \"Dear [Client Name]\" if found, otherwise \"Dear Traveller\".\n- Politely confirm we have received their request.\n- Invite them to schedule a discovery call using this link: https://meetings.hubspot.com/andrea196\n- Express excitement to learn more about their trip and to assist them.\n- Keep the tone friendly, human, and reassuring.\n- **Do NOT**:\n  ‚Ä¢ Mention or imply itineraries.\n  ‚Ä¢ Mention or imply budgets or pricing.\n  ‚Ä¢ Mention or imply booking steps or securing reservations.\n  ‚Ä¢ Include speculative trip details or recommendations.\n- Close the email with **\"Andrea Oschetti\"** as the sign-off (no other names or placeholders).\n\n---\n\n### üîç 2. Extract and structure key details from the client‚Äôs email\n\nReturn a JSON object in this format:\n\n```json\n{\n  \"subject\": \"reply email subject\",\n  \"draft_email_content\": \"Acknowledgment email text here...\",\n  \"extracted_data\": {\n    \"client_name\": \"[If mentioned or inferable, else null]\",\n    \"project_name\": \"[name of client-trip to destination name]\",\n    \"client_email\": \"[Parsed from metadata or body]\",\n    \"phone\": \"[If found, else null]\",\n    \"intent\": \"[Short summary of what the client wants]\",\n    \"destination\": \"[Main destination(s), if mentioned]\",\n    \"dates\": \"[Travel timeframe]\",\n    \"preferences\": \"[Tags like luxury, hiking, family, adventure, etc.]\",\n    \"budget\": \"[luxury, mid-range, budget, or specific amount if stated]\",\n    \"number_of_travelers\": \"[If mentioned, else null]\",\n    \"client_location\": \"[If user mentions where they are from]\",\n    \"client_type\": \"\",\n    \"trip_duration\": \"\",\n    \"style\": \"\",\n    \"season\": \"\",\n    \"avoid_these_things\": \"\"\n  }\n}\n"
            },
            {
              "content": "=Call the first_responder_tool while generating the responses as well ",
              "role": "system"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1312,
        -16
      ],
      "id": "3978adcb-7f09-4484-b29b-9cfd18231bdf",
      "name": "get client details and trip1",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolName": "first_responder_tool",
        "toolDescription": "call this tool when generating client responses",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.1,
      "position": [
        1344,
        112
      ],
      "id": "f285fa34-54e1-47fb-acd5-e879966403d1",
      "name": "Qdrant Vector Store9",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        1440,
        224
      ],
      "id": "262ebeb2-6821-4ad0-8be7-a367d6f6c50b",
      "name": "Embeddings OpenAI9",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblWJpte2TTnTHKI0",
          "mode": "list",
          "cachedResultName": "Tasks to Approve",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblWJpte2TTnTHKI0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Task Name": "=AI Agent | Existing Client New Trip Inquiry - {{ $('get client details and trip1').item.json.message.content.extracted_data.client_name }} | Approve First Response",
            "Assignee": "={{ [ { \"email\": $json.Email } ] }}",
            "Priority": "High",
            "Due Date": "={{ new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString() }}",
            "Description": "={{ $('get client details and trip1').item.json.message.content.draft_email_content }}",
            "Approval Status": "To Do",
            "Task Status": false
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "Task Name",
              "displayName": "Task Name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Approval Status",
              "displayName": "Approval Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Approved",
                  "value": "Approved"
                },
                {
                  "name": "Update",
                  "value": "Update"
                },
                {
                  "name": "Reject",
                  "value": "Reject"
                },
                {
                  "name": "To Do",
                  "value": "To Do"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Agent Status",
              "displayName": "AI Agent Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Updating",
                  "value": "Updating"
                },
                {
                  "name": "Update Done",
                  "value": "Update Done"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Description",
              "displayName": "Description",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Assignee",
              "displayName": "Assignee",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Priority",
              "displayName": "Priority",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "High",
                  "value": "High"
                },
                {
                  "name": "Mid",
                  "value": "Mid"
                },
                {
                  "name": "Low",
                  "value": "Low"
                },
                {
                  "name": "Done",
                  "value": "Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Due Date",
              "displayName": "Due Date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "dateTime",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Supplier",
              "displayName": "Supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "options": [
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                },
                {
                  "name": "ali@remap.ai",
                  "value": "ali@remap.ai"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Attachments",
              "displayName": "Attachments",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "array",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Task Status",
              "displayName": "Task Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "boolean",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2096,
        -32
      ],
      "id": "e4b5d79d-30f0-4d94-97b6-144b2a3668c9",
      "name": "create task for first response1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblEJcoFPSzrdr6YL",
          "mode": "list",
          "cachedResultName": "client profile",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblEJcoFPSzrdr6YL"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('If1').first().json.client_id }}",
            "phone": "={{ $('get client details and trip1').item.json.message.content.extracted_data.phone }}",
            "client_location": "={{ $('get client details and trip1').item.json.message.content.extracted_data.client_location }}",
            "email": "={{ $('get client details and trip1').item.json.message.content.extracted_data.client_email }}",
            "tour_count": "={{ Number($('If1').first().json.tour_count) + 1 }}",
            "full_name": "={{ $('If1').item.json.full_name }}"
          },
          "matchingColumns": [
            "client_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "full_name",
              "displayName": "full_name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email",
              "displayName": "email",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "phone",
              "displayName": "phone",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_location",
              "displayName": "client_location",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tour_count",
              "displayName": "tour_count",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2304,
        -32
      ],
      "id": "38878fe6-cc00-4728-a744-0d15e216a74e",
      "name": "crm for clients1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "project_id": "={{ $('generate client and project id1').item.json.project_id }}",
            "client_id": "={{ $json.fields.client_id }}",
            "destination": "={{ $('get client details and trip1').item.json.message.content.extracted_data.destination }}",
            "travel_dates": "={{ $('get client details and trip1').item.json.message.content.extracted_data.dates }}",
            "status": "Proposal",
            "budget": "={{ $('get client details and trip1').item.json.message.content.extracted_data.budget }}",
            "intent": "={{ $('get client details and trip1').item.json.message.content.extracted_data.intent }}",
            "preferences": "={{ $('get client details and trip1').item.json.message.content.extracted_data.preferences }}",
            "number_of_travelers": "={{ $('get client details and trip1').item.json.message.content.extracted_data.number_of_travelers }}",
            "tript duration": "={{ $('get client details and trip1').item.json.message.content.extracted_data.trip_duration }}",
            "client type": "={{ $('get client details and trip1').item.json.message.content.extracted_data.client_type }}",
            "tript style": "={{ $('get client details and trip1').item.json.message.content.extracted_data.style }}",
            "season": "={{ $('get client details and trip1').item.json.message.content.extracted_data.season }}",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": true
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2512,
        -32
      ],
      "id": "00a6f71a-d393-4674-a7e3-0522ba32b609",
      "name": "crm for projects",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "create",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblccLTCLW4kFQzFY",
          "mode": "list",
          "cachedResultName": "emails",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblccLTCLW4kFQzFY"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "email_id ": "={{ $('Get email fields').first().json.email_id }}",
            "thread_id": "={{ $('Get email fields').first().json.thread_id }}",
            "subject": "={{ $('Get email fields').first().json.subject }}",
            "body": "={{ $('Get email fields').first().json.snippet }}",
            "timestamp": "={{ $('Get email fields').first().json.internal_date }}",
            "asana task id": "={{ $('create task for first response1').item.json.id }}",
            "Reply subject": "={{ $('get client details and trip1').item.json.message.content.subject }}",
            "client_id": "={{ $('crm for clients1').item.json.fields.client_id }}",
            "client name": "={{ $('crm for clients1').item.json.fields.full_name }}",
            "project_id": "={{ $json.fields.project_id }}",
            "sender": "={{ $('crm for clients1').item.json.fields.email }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "email_id ",
              "displayName": "email_id ",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "thread_id",
              "displayName": "thread_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client name",
              "displayName": "client name",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sender",
              "displayName": "sender",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "subject",
              "displayName": "subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "body",
              "displayName": "body",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "timestamp",
              "displayName": "timestamp",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "AI Reply",
              "displayName": "AI Reply",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Reply subject",
              "displayName": "Reply subject",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id",
              "displayName": "asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "final payment recieved",
              "displayName": "final payment recieved",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2736,
        -32
      ],
      "id": "8eeff06a-7e29-4bfb-a578-9bff4aedb7ac",
      "name": "crm for emails",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Luxury Travel Itinerary Management",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tblosG3F9Q5SteGmG",
          "mode": "list",
          "cachedResultName": "Team Members",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tblosG3F9Q5SteGmG"
        },
        "filterByFormula": "=({Name} = 'Ali')",
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1856,
        -32
      ],
      "id": "079487c3-d14c-497f-b98c-7342443cd965",
      "name": "get team members1",
      "executeOnce": true,
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('get airtable task').item.json.fields.client_id }}",
            "project_id": "={{ $('get airtable task').item.json.fields.project_id }}",
            "status": "First Response Sent",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8416,
        144
      ],
      "id": "122bc3ec-9b41-40b5-8e6d-d7ce37f8d932",
      "name": "Update Status",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('get blueprint1').item.json['client id'] }}",
            "project_id": "={{ $('get blueprint1').item.json['project id'] }}",
            "status": "Blueprint Sent",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        8352,
        912
      ],
      "id": "c997deae-dd7b-4f66-a910-2f73db26405f",
      "name": "Update Status1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "call this tool while generating itineraries\n",
        "qdrantCollection": {
          "__rl": true,
          "value": "blueflower_database_",
          "mode": "list",
          "cachedResultName": "blueflower_database_"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreQdrant",
      "typeVersion": 1.3,
      "position": [
        8800,
        2000
      ],
      "id": "d79f25c9-1455-46f0-9dee-81c9ac2b0304",
      "name": "Qdrant Vector Store1",
      "credentials": {
        "qdrantApi": {
          "id": "pwyF3GDQ0GElEapD",
          "name": "QdrantApi account ali"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        8816,
        2128
      ],
      "id": "eea71019-2f0d-4582-8a68-91b1ccfc36f4",
      "name": "Embeddings OpenAI1",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=You are a **professional travel copywriter** specializing in **luxury safari itineraries**. You write in an **evocative, immersive style**, similar to *Cond√© Nast Traveller*, and you strictly follow the required output format.\n\n---\n\n### **Your Task**\nUsing the provided **client details** and **tour blueprint** (including flights, transfers, accommodations, and activities), produce a **fully formatted, day-by-day itinerary** in **Markdown** exactly matching the format and headings shown in the **Example Format** below.\n\nThe number and order of days **must match exactly** the days in the provided blueprint ‚Äî do not add, remove, or rearrange them.\n\n---\n\n### **Content Requirements**\nFor **each day**:\n\n1.  **Opening Narrative Paragraph**\n    - A rich, detailed, sensory description setting the scene and connecting the day's activities.\n    - Use multi-sensory language (sights, sounds, textures, smells, feelings) to create an immersive narrative.\n    - This paragraph should be the \"story arc\" for the day, guiding the reader through the experience.\n\n2.  **Structured Details Sections** (exact headings, bullet points, and order):\n    - **Flight Details** (only if available).\n    - **Transfer Details** (only if available).\n    - **Accommodation Details** (always include if available).\n    - **Budget Amount** (always show if available).\n    - **Activity Details**:\n        - Start Time / End Time.\n        - Contact Person.\n        - **Detailed Description**: Write a multi-paragraph, immersive narrative describing the journey, the safari experience, wildlife sightings, the atmosphere of the destination, and how it aligns with the client's preferences. Be specific and evocative. This section must be highly detailed and descriptive.\n        - Inclusions & Exclusions lists.\n\nIf a field is missing, **omit that line** ‚Äî do not insert placeholders (e.g., \"N/A\").\n\n---\n\n### **Formatting & Style Rules**\n- Heading (in markdown) for the document must be:\n  **\"Your Personalized Itinerary Plan For Your Upcoming Trip\"**\n  (Line Break) Followed by\n  **client details** exactly in this order:\n  Name:\n  Email:\n  Phone:\n  Client ID:\n  Project ID:\n  Preferences:\n  Budget:\n  Number of Travellers:\n  Trip Duration:\n  Client Type:\n- All dates must be written in **full format** (e.g., *Monday, 12 August 2025*).\n- **All headings must be on their own line** and correctly formatted with Markdown (e.g., `## Day 1 - ...`). Do not merge headings with paragraphs.\n- Maintain **clean Markdown** with consistent headings and bullet formatting.\n- Do **not** merge or rename categories.\n- Do **not** add commentary, explanations, or extra sections outside the requested structure.\n- Output **only** the itinerary in Markdown ‚Äî no additional text.\n\n---\n\n### **Example Format**\n*(Follow this structure exactly for every day ‚Äî change content only)*\n\n**Day 1 ‚Äì Arrival in Nairobi**\nYour adventure begins as you touch down in Nairobi, where the vibrancy of Kenya greets you with open arms. After a warm welcome, you will be escorted to your hotel to settle in. Take the afternoon to relax, enjoy the pool, or explore the bustling streets nearby before your safari begins.\n\n**Flight Details**\n- Airline: Kenya Airways\n- Flight Number: KQ101\n- Departure Time & Date: Monday, 12 August 2025, 09:30\n- Arrival Time & Date: Monday, 12 August 2025, 19:45\n- Departure Airport: London Heathrow (LHR)\n- Arrival Airport: Nairobi Jomo Kenyatta International (NBO)\n\n**Transfer Details**\n- Departure Location: Nairobi Jomo Kenyatta International Airport\n- Arrival Location: Hemingways Nairobi Hotel\n\n**Accommodation Details**\n- Name: Hemingways Nairobi Hotel\n- Dates of Stay: Monday, 12 August 2025 ‚Äì Tuesday, 13 August 2025\n- Room Type & Quantity: Deluxe Suite, 1 room\n- Basis of Stay: Half Board\n- Phone: +254 20 229 5000\n- Website: https://www.hemingways-collection.com\n- Address: Mbagathi Ridge, Karen, Nairobi, Kenya\n\n**Budget Amount**\n- USD 1,200\n\n**Activity Details**\n- Start Time: 15:00\n- End Time: 18:00\n- Contact Person: John Mwangi, +254 700 000000\n- Description: *[Multi-paragraph detailed narrative here, focusing on the story of the activity, sensory details, and the overall feel of the experience. This section should be immersive and lengthy.]*\n- Inclusions: Guided city tour, refreshments\n- Exclusions: Dinner\n\n---\n\n### **Final Paragraph**\nAfter the last day's itinerary, include a concluding paragraph that summarizes the entire journey. This paragraph should be emotional and aspirational, leaving the client with a sense of anticipation and excitement for their trip. It should briefly touch on the key highlights of the overall experience. End with a warm closing and a gentle call to action.\n\n---\n\n### **Data to Use**\n- Client Name: {{ $('get client details3').first().json.full_name }}\n- Client Email: {{ $('get client details3').first().json.email }}\n- Phone: {{ $('get client details3').first().json.phone }}\n- Client ID: {{ $('get client details3').first().json.client_id }}\n- Project ID: {{ $('get blueprint3').first().json['project id'] }}\n- Preferences: {{ $('get project details4').first().json.preferences }}\n- Budget: {{ $('get project details4').first().json.budget }}\n- Number of Travellers: {{ $('get project details4').first().json.number_of_travelers }}\n- Trip Duration: {{ $('get project details4').first().json['tript duration'] }}\n- Client Type: {{ $('get project details4').item.json['client type'] }}\n- Blueprint: {{ $('get blueprint3').item.json.blueprint }}\n\n---\n\n**Important:**\n- You **must** follow this exact structure and headings.\n- The **number of days and order of days** must match the blueprint exactly.\n- The output must be **100% valid Markdown** for both browser display and PDF export."
            },
            {
              "content": "\ncall the attached tool everytime when generating itineraries\nStrict Note: Your response should be in Proper markdown format that includes paragraphs, headings, sub headings and bullets etc. That should be stricitly followed ",
              "role": "system"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        8736,
        1840
      ],
      "id": "a6e0ca57-5bba-47a2-8ef8-58874b1669f5",
      "name": "itinerary generator",
      "credentials": {
        "openAiApi": {
          "id": "dTmr2fo8YYQRqIzg",
          "name": "OpenAi account 3"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $('add itinerary in table').item.json.fields['client id'] }}",
            "project_id": "={{ $('add itinerary in table').item.json.fields['project id'] }}",
            "status": "Initial Payment Done",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        10208,
        1840
      ],
      "id": "3ed71e0e-1ad1-47f5-a863-30770347c393",
      "name": "Update Status2",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "client_id": "={{ $json.fields['client id'] }}",
            "project_id": "={{ $json.fields['project id'] }}",
            "status": "30% Deposit Pending",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "client_id",
            "project_id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        2512,
        4192
      ],
      "id": "d80a4833-1fc3-4c92-8154-aff2fa0577ff",
      "name": "Update Status3",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "app5hbsW0bS4M02wz",
          "mode": "list",
          "cachedResultName": "Blueflower",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz"
        },
        "table": {
          "__rl": true,
          "value": "tbl0Fteomxfpa22fQ",
          "mode": "list",
          "cachedResultName": "Projects",
          "cachedResultUrl": "https://airtable.com/app5hbsW0bS4M02wz/tbl0Fteomxfpa22fQ"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Final Payment Task id": "={{ $json.id }}",
            "Final Payment Status": "Paid",
            "status": "Final Payment Done",
            "responded": "Yes",
            "email_number": 0,
            "next_email_index": 0
          },
          "matchingColumns": [
            "Final Payment Task id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": true
            },
            {
              "id": "project_id",
              "displayName": "project_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client_id",
              "displayName": "client_id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "destination",
              "displayName": "destination",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "travel_dates",
              "displayName": "travel_dates",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "status",
              "displayName": "status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "options",
              "options": [
                {
                  "name": "Proposal",
                  "value": "Proposal"
                },
                {
                  "name": "First Response Sent",
                  "value": "First Response Sent"
                },
                {
                  "name": "Discovery Call- Pending",
                  "value": "Discovery Call- Pending"
                },
                {
                  "name": "Blueprint Sent",
                  "value": "Blueprint Sent"
                },
                {
                  "name": "Initial Payment Pending",
                  "value": "Initial Payment Pending"
                },
                {
                  "name": "Initial Payment Done",
                  "value": "Initial Payment Done"
                },
                {
                  "name": "Itinerary Sent",
                  "value": "Itinerary Sent"
                },
                {
                  "name": "Supplier Itinerary Sent",
                  "value": "Supplier Itinerary Sent"
                },
                {
                  "name": "30% Deposit Pending",
                  "value": "30% Deposit Pending"
                },
                {
                  "name": "30% Deposit Done",
                  "value": "30% Deposit Done"
                },
                {
                  "name": "Final Visual Itinerary Sent",
                  "value": "Final Visual Itinerary Sent"
                },
                {
                  "name": "Final Payment Done",
                  "value": "Final Payment Done"
                }
              ],
              "readOnly": false,
              "removed": false
            },
            {
              "id": "budget",
              "displayName": "budget",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "created_at",
              "displayName": "created_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "intent",
              "displayName": "intent",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "preferences",
              "displayName": "preferences",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "number_of_travelers",
              "displayName": "number_of_travelers",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript duration",
              "displayName": "tript duration",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "client type",
              "displayName": "client type",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "tript style",
              "displayName": "tript style",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "season",
              "displayName": "season",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for TD",
              "displayName": "asana task id for TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD",
              "displayName": "TD",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "TD Asana Id",
              "displayName": "TD Asana Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for payment tracking",
              "displayName": "asana task id for payment tracking",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier",
              "displayName": "supplier",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "supplier asana task id",
              "displayName": "supplier asana task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "asana task id for dmc",
              "displayName": "asana task id for dmc",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sent date",
              "displayName": "sent date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "sla date",
              "displayName": "sla date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "escalate date",
              "displayName": "escalate date",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "responded",
              "displayName": "responded",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Financer",
              "displayName": "Financer",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Finance File task id",
              "displayName": "Finance File task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Task id",
              "displayName": "Final Payment Task id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Payment Status",
              "displayName": "Final Payment Status",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Final Itinerary Sent Task Id",
              "displayName": "Final Itinerary Sent Task Id",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "pre-trip emails",
              "displayName": "pre-trip emails",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "email_number",
              "displayName": "email_number",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_index",
              "displayName": "next_email_index",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "last_email_sent_at",
              "displayName": "last_email_sent_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "next_email_scheduled_at",
              "displayName": "next_email_scheduled_at",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        7968,
        5968
      ],
      "id": "39a297f8-d000-42d6-887d-eb578e3db9a8",
      "name": "update status1",
      "credentials": {
        "airtableTokenApi": {
          "id": "KOTg9DL6uZxA75TA",
          "name": "Airtable account Ali"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Get email fields": {
      "main": [
        [
          {
            "node": "Airtable1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model6": {
      "ai_languageModel": [
        [
          {
            "node": "response generator",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "response generator",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Gmail Trigger": {
      "main": [
        [
          {
            "node": "Get email fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ingest client email": {
      "main": [
        [
          {
            "node": "ingest new project data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "generate client and project id": {
      "main": [
        [
          {
            "node": "get team members",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details and trip": {
      "main": [
        [
          {
            "node": "generate client and project id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "get client details and trip",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "decide sender": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store3": {
      "ai_tool": [
        [
          {
            "node": "get client details and trip",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI3": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store3",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "do existing client wants a new tour",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "decide sender",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store8": {
      "ai_tool": [
        [
          {
            "node": "response generator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI8": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store8",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "create task for first response": {
      "main": [
        [
          {
            "node": "crm for clients",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for clients": {
      "main": [
        [
          {
            "node": "crm for projects2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for projects2": {
      "main": [
        [
          {
            "node": "crm for emails1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for emails1": {
      "main": [
        [
          {
            "node": "Ingest client email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "update email",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "update email": {
      "main": [
        [
          {
            "node": "update airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status": {
      "main": [
        [
          {
            "node": "get airtable task",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get project id from emails",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Identify task": {
      "main": [
        [
          {
            "node": "check status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status6",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status7",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status9",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status10",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status11",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "check status12",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Airtable": {
      "main": [
        [
          {
            "node": "Identify task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Request to ingest sent email": {
      "main": [
        [
          {
            "node": "completed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update airtable": {
      "main": [
        [
          {
            "node": "updated comment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get airtable task": {
      "main": [
        [
          {
            "node": "Request to ingest sent email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get airtable task1": {
      "main": [
        [
          {
            "node": "update email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable1": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get projects details": {
      "main": [
        [
          {
            "node": "get emails details1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get emails details1": {
      "main": [
        [
          {
            "node": "combine older messages",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "combine older messages": {
      "main": [
        [
          {
            "node": "response generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "response generator": {
      "main": [
        [
          {
            "node": "create task for reply approval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for reply approval": {
      "main": [
        [
          {
            "node": "add latest client email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get team members": {
      "main": [
        [
          {
            "node": "create task for first response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add latest client email": {
      "main": [
        [
          {
            "node": "Ingest client email1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete task": {
      "main": [
        []
      ]
    },
    "get project id from emails": {
      "main": [
        [
          {
            "node": "update project status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status": {
      "main": [
        [
          {
            "node": "delete task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingest in db1": {
      "main": [
        [
          {
            "node": "blueprint generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Drive Trigger": {
      "main": [
        [
          {
            "node": "read client emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client preferences1": {
      "main": [
        [
          {
            "node": "update projects data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set fields email and blueprint": {
      "main": [
        [
          {
            "node": "create blueprint aproval task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "get project details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "read client emails": {
      "main": [
        [
          {
            "node": "extract partcipants",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract partcipants": {
      "main": [
        [
          {
            "node": "get participants",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "blueprint generator": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "blueprint generator",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store4": {
      "ai_tool": [
        [
          {
            "node": "blueprint generator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI4": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store4",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "did client exist",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get participants": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "did client exist": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Airtable2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable2": {
      "main": [
        [
          {
            "node": "get client preferences1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update projects data": {
      "main": [
        [
          {
            "node": "ingest in db1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details": {
      "main": [
        [
          {
            "node": "set fields email and blueprint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create blueprint aproval task": {
      "main": [
        [
          {
            "node": "create task for TD Assignment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for TD Assignment": {
      "main": [
        [
          {
            "node": "store blueprint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "store blueprint": {
      "main": [
        [
          {
            "node": "Add TD task id in Projects",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add TD task id in Projects": {
      "main": [
        []
      ]
    },
    "Qdrant Vector Store": {
      "ai_tool": [
        [
          {
            "node": "blueprint updater",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "update blueprint task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status1": {
      "main": [
        [
          {
            "node": "get blueprint1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get blueprint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get blueprint1": {
      "main": [
        [
          {
            "node": "ingest in db",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get blueprint2": {
      "main": [
        [
          {
            "node": "get client details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details": {
      "main": [
        [
          {
            "node": "get project details2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details2": {
      "main": [
        [
          {
            "node": "blueprint updater",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "blueprint updater": {
      "main": [
        [
          {
            "node": "delete previos blueprint",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete previos blueprint": {
      "main": [
        [
          {
            "node": "convet to pdf",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "convet to pdf": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update blueprint task": {
      "main": [
        [
          {
            "node": "updated comment1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update blueprint data": {
      "main": [
        []
      ]
    },
    "get blueprint": {
      "main": [
        [
          {
            "node": "update project status1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status1": {
      "main": [
        [
          {
            "node": "delete task1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set email body for payment": {
      "main": [
        [
          {
            "node": "create task for thank you email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status2": {
      "main": [
        [
          {
            "node": "add TD email to project",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "add TD email to project",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add TD email to project": {
      "main": [
        [
          {
            "node": "get client details1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details1": {
      "main": [
        [
          {
            "node": "set email body for payment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for thank you email": {
      "main": [
        [
          {
            "node": "add payment task id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add payment task id": {
      "main": [
        [
          {
            "node": "completed2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "email body",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "email body": {
      "main": [
        [
          {
            "node": "create task for thank you email1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingest this email in db": {
      "main": [
        [
          {
            "node": "add thank you email to emaisl",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update thanks email": {
      "main": [
        [
          {
            "node": "update thanks task1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status3": {
      "main": [
        [
          {
            "node": "get project details4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments2",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "update project status2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details4": {
      "main": [
        [
          {
            "node": "get blueprint3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get blueprint3": {
      "main": [
        [
          {
            "node": "get client details3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details3": {
      "main": [
        [
          {
            "node": "ingest this email in db",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add thank you email to emaisl": {
      "main": [
        [
          {
            "node": "itinerary generator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for thank you email1": {
      "main": [
        [
          {
            "node": "add itinerary in table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status2": {
      "main": [
        [
          {
            "node": "delete task2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingest in db2": {
      "main": [
        [
          {
            "node": "prepare itinerary for DMC",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store5": {
      "ai_tool": [
        [
          {
            "node": "itinerary udpator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI5": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store5",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request3": {
      "main": [
        [
          {
            "node": "set description",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete previous itinerary": {
      "main": [
        [
          {
            "node": "HTTP Request3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to convert into pdf1": {
      "main": [
        [
          {
            "node": "upload file to drive",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "prepare itinerary for DMC": {
      "main": [
        [
          {
            "node": "request to convert into pdf1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "upload file to drive": {
      "main": [
        [
          {
            "node": "set fields for dmc table",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set fields for dmc table": {
      "main": [
        [
          {
            "node": "get project details6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status4": {
      "main": [
        [
          {
            "node": "get project details5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get itinerary1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details5": {
      "main": [
        [
          {
            "node": "ingest in db2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details6": {
      "main": [
        [
          {
            "node": "create task to get supplier email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task to get supplier email": {
      "main": [
        [
          {
            "node": "create task for supplier itinerary Approval",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for supplier itinerary Approval": {
      "main": [
        [
          {
            "node": "add task id for supplier email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add task id for supplier email": {
      "main": [
        [
          {
            "node": "add supplier itinerary1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details2": {
      "main": [
        [
          {
            "node": "get project details7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details7": {
      "main": [
        [
          {
            "node": "itinerary udpator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get itinerary": {
      "main": [
        [
          {
            "node": "get client details2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "itinerary udpator": {
      "main": [
        [
          {
            "node": "delete previous itinerary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set description": {
      "main": [
        [
          {
            "node": "update itinerary task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update itinerary task": {
      "main": [
        [
          {
            "node": "updated comment3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status3": {
      "main": [
        [
          {
            "node": "delete task3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get itinerary1": {
      "main": [
        [
          {
            "node": "update project status3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status5": {
      "main": [
        [
          {
            "node": "comma separated supplier names",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "comma separated supplier names",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "comma separated supplier names": {
      "main": [
        [
          {
            "node": "add supplier email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update itinerary for supplier": {
      "main": [
        [
          {
            "node": "delete previous itinerary1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete previous itinerary1": {
      "main": [
        [
          {
            "node": "request to convert into pdf",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to convert into pdf": {
      "main": [
        [
          {
            "node": "upload file to drive1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "upload file to drive1": {
      "main": [
        [
          {
            "node": "set fields for dmc table1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set fields for dmc table1": {
      "main": [
        [
          {
            "node": "update itinerary task1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status6": {
      "main": [
        [
          {
            "node": "get project details8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments4",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get itinerary3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get itinerary2": {
      "main": [
        [
          {
            "node": "update itinerary for supplier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store2": {
      "ai_tool": [
        [
          {
            "node": "update itinerary for supplier",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI2": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store2",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "update itinerary task1": {
      "main": [
        [
          {
            "node": "updated comment4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status4": {
      "main": [
        [
          {
            "node": "delete task4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get itinerary3": {
      "main": [
        [
          {
            "node": "update project status4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add supplier emails": {
      "main": [
        [
          {
            "node": "add sla date and time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details8": {
      "main": [
        [
          {
            "node": "get client details to store in supplier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details to store in supplier": {
      "main": [
        [
          {
            "node": "Add supplier emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add sla date and time": {
      "main": [
        [
          {
            "node": "ingest this email in db1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "get suppliers from projects2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If2": {
      "main": [
        [
          {
            "node": "update after 3 days",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger1": {
      "main": [
        [
          {
            "node": "get suppliers from projects",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get suppliers from projects2": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "If2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update after 3 days": {
      "main": [
        [
          {
            "node": "email content for supplier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "email content for supplier": {
      "main": [
        [
          {
            "node": "create task for 3 days",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for 3 days": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get suppliers from projects": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "If4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If4": {
      "main": [
        [
          {
            "node": "update after 7 days1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "email content for supplier1": {
      "main": [
        [
          {
            "node": "create task for 7 days1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update after 7 days1": {
      "main": [
        [
          {
            "node": "email content for supplier1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "TD Email": {
      "main": [
        [
          {
            "node": "Get email fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get email fields1": {
      "main": [
        [
          {
            "node": "is it supplier",
            "type": "main",
            "index": 0
          },
          {
            "node": "is it client",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set fields for asana": {
      "main": [
        [
          {
            "node": "supplier responded create task",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project id1": {
      "main": [
        [
          {
            "node": "get itinerary of that project",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "determine client response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "determine client response": {
      "main": [
        [
          {
            "node": "if changes are required",
            "type": "main",
            "index": 0
          },
          {
            "node": "if changes are required1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if changes are required": {
      "main": [
        [
          {
            "node": "create task for TD1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "if changes are required1": {
      "main": [
        [
          {
            "node": "create task for TD",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "is it supplier": {
      "main": [
        [
          {
            "node": "supplier responded",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "is it client": {
      "main": [
        [
          {
            "node": "get project of this client",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "supplier responded": {
      "main": [
        [
          {
            "node": "get project id1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get itinerary of that project": {
      "main": [
        [
          {
            "node": "Proposal Validator",
            "type": "main",
            "index": 0
          },
          {
            "node": "Set fields for asana",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "supplier responded create task": {
      "main": [
        [
          {
            "node": "save supplier email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project of this client": {
      "main": [
        [
          {
            "node": "get emails of this client1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get emails of this client1": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for TD": {
      "main": [
        [
          {
            "node": "reciept task id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "email body1": {
      "main": [
        [
          {
            "node": "update record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status7": {
      "main": [
        [
          {
            "node": "get project details1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get project details9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details1": {
      "main": [
        [
          {
            "node": "get travel designer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get travel designer": {
      "main": [
        [
          {
            "node": "create task to get finance file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task to get finance file": {
      "main": [
        [
          {
            "node": "add task id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details3": {
      "main": [
        [
          {
            "node": "draft email changing for suppplier",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "draft email changing for suppplier": {
      "main": [
        [
          {
            "node": "email body1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update project status5": {
      "main": [
        [
          {
            "node": "delete task5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details9": {
      "main": [
        [
          {
            "node": "update project status5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Emails creator",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store6": {
      "ai_tool": [
        [
          {
            "node": "Emails creator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI6": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store6",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Emails creator": {
      "main": [
        [
          {
            "node": "add 10 emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract email6": {
      "main": [
        [
          {
            "node": "update record1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status8": {
      "main": [
        [
          {
            "node": "completed8",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get project details11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get project details11": {
      "main": [
        [
          {
            "node": "get client details4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details4": {
      "main": [
        [
          {
            "node": "get client details5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details5": {
      "main": [
        [
          {
            "node": "extract email6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update record1": {
      "main": [
        [
          {
            "node": "add finance file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status9": {
      "main": [
        [
          {
            "node": "get details using id",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get details using id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get details using id": {
      "main": [
        [
          {
            "node": "add reciept",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add reciept": {
      "main": [
        [
          {
            "node": "get td",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get td": {
      "main": [
        [
          {
            "node": "create task for final itinerary sent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for final itinerary sent": {
      "main": [
        [
          {
            "node": "add task id1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook2": {
      "main": [
        [
          {
            "node": "Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status10": {
      "main": [
        [
          {
            "node": "get details using id1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get details using id1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get details using id1": {
      "main": [
        [
          {
            "node": "get client details6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details6": {
      "main": [
        [
          {
            "node": "Emails creator",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add 10 emails": {
      "main": [
        [
          {
            "node": "create task for final payment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for final payment": {
      "main": [
        [
          {
            "node": "add task id2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status11": {
      "main": [
        [
          {
            "node": "update status",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "update status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update status": {
      "main": [
        [
          {
            "node": "completed11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger2": {
      "main": [
        [
          {
            "node": "get trips where final payment is not done1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get trips where final payment is not done1": {
      "main": [
        [
          {
            "node": "If6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add task id1": {
      "main": [
        [
          {
            "node": "completed9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If6": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [],
        [
          {
            "node": "check trip date and now",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check trip date and now": {
      "main": [
        [
          {
            "node": "If5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If5": {
      "main": [
        [
          {
            "node": "Airtable3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable3": {
      "main": [
        [
          {
            "node": "calculate values",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "calculate values": {
      "main": [
        [
          {
            "node": "If7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If7": {
      "main": [
        [
          {
            "node": "get pre trip emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get pre trip emails": {
      "main": [
        [
          {
            "node": "extract relevant email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "extract relevant email": {
      "main": [
        [
          {
            "node": "create task for email send",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "create task for email send": {
      "main": [
        [
          {
            "node": "update data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update data": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingest in db": {
      "main": [
        [
          {
            "node": "completed1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add itinerary in table": {
      "main": [
        [
          {
            "node": "completed3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add supplier itinerary1": {
      "main": [
        [
          {
            "node": "completed4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ingest this email in db1": {
      "main": [
        [
          {
            "node": "completed5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add supplier email": {
      "main": [
        [
          {
            "node": "completed6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add task id": {
      "main": [
        [
          {
            "node": "completed7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add task id2": {
      "main": [
        [
          {
            "node": "completed10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "check status12": {
      "main": [
        [
          {
            "node": "completed12",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "request to get comments6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Airtable4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments": {
      "main": [
        [
          {
            "node": "latest comment",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment": {
      "main": [
        [
          {
            "node": "get airtable task1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments1": {
      "main": [
        [
          {
            "node": "latest comment1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment1": {
      "main": [
        [
          {
            "node": "get blueprint2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updated comment1": {
      "main": [
        [
          {
            "node": "update blueprint data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments2": {
      "main": [
        [
          {
            "node": "latest comment2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment2": {
      "main": [
        [
          {
            "node": "update thanks email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "update thanks task1": {
      "main": [
        [
          {
            "node": "updated comment2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments3": {
      "main": [
        [
          {
            "node": "latest comment3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment3": {
      "main": [
        [
          {
            "node": "get itinerary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updated comment3": {
      "main": [
        [
          {
            "node": "update itinerary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments4": {
      "main": [
        [
          {
            "node": "latest comment4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment4": {
      "main": [
        [
          {
            "node": "get itinerary2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updated comment4": {
      "main": [
        [
          {
            "node": "update itinerary details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments5": {
      "main": [
        [
          {
            "node": "latest comment5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment5": {
      "main": [
        [
          {
            "node": "get project details3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "updated comment5": {
      "main": [
        []
      ]
    },
    "update record": {
      "main": [
        [
          {
            "node": "updated comment5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "request to get comments6": {
      "main": [
        [
          {
            "node": "latest comment6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "latest comment6": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable4": {
      "main": [
        [
          {
            "node": "updated comment6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store7": {
      "ai_tool": [
        [
          {
            "node": "Message a model",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI7": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store7",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "do existing client wants a new tour": {
      "main": [
        [
          {
            "node": "If3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If3": {
      "main": [
        [
          {
            "node": "get client details and trip1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "get projects details",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ingest client email2": {
      "main": [
        [
          {
            "node": "ingest new project data1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "generate client and project id1": {
      "main": [
        [
          {
            "node": "get team members1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get client details and trip1": {
      "main": [
        [
          {
            "node": "generate client and project id1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store9": {
      "ai_tool": [
        [
          {
            "node": "get client details and trip1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI9": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store9",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "create task for first response1": {
      "main": [
        [
          {
            "node": "crm for clients1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for clients1": {
      "main": [
        [
          {
            "node": "crm for projects",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for projects": {
      "main": [
        [
          {
            "node": "crm for emails",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "crm for emails": {
      "main": [
        [
          {
            "node": "Ingest client email2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get team members1": {
      "main": [
        [
          {
            "node": "create task for first response1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "completed": {
      "main": [
        [
          {
            "node": "Update Status",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "completed1": {
      "main": [
        [
          {
            "node": "Update Status1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Qdrant Vector Store1": {
      "ai_tool": [
        [
          {
            "node": "itinerary generator",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI1": {
      "ai_embedding": [
        [
          {
            "node": "Qdrant Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "itinerary generator": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "completed3": {
      "main": [
        [
          {
            "node": "Update Status2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "reciept task id": {
      "main": [
        [
          {
            "node": "Update Status3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "completed12": {
      "main": [
        [
          {
            "node": "update status1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8482a82f-0488-412b-8d98-818460830506",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f644d820de3ea84e558b3c1a9011167af507d460ba75d1147a2a188babfa1150"
  },
  "id": "SMEm6k0OEDTo6SzA",
  "tags": []
}